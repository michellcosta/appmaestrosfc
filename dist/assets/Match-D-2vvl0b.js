const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-pdf-BlfB758B.js","assets/vendor-supabase-5K_8OYiR.js","assets/vendor-react-BSMgdr9Q.js","assets/vendor-ui-Bl6_fDik.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./vendor-supabase-5K_8OYiR.js";import{j as s}from"./vendor-ui-Bl6_fDik.js";import{r as t}from"./vendor-react-BSMgdr9Q.js";import{c as a,u as r,B as n,C as i,a as l,T as c,U as d,S as o,D as m,Z as x,h}from"./index-D-h0AB1a.js";import{D as u,a as g,b as j,c as p,d as b,e as v}from"./dialog-CX7tWYuj.js";import{L as f}from"./label-BetwYsf8.js";import{S as N,a as z,b as w,c as y,d as k}from"./select-ObUtRLUd.js";import{T as S,a as A,b as C}from"./tabs-Cnr8VZfC.js";import{u as E}from"./matchStore-BjvAJycv.js";import{u as P}from"./playersStore-BsZLkRm3.js";import{c as D,p as T,a as V,u as F}from"./gamesStore-NUrBWBVY.js";import{u as M}from"./usePermissions-Ct4r71CL.js";import{u as R}from"./vendor-router-uw2sfKrb.js";import{C as O}from"./crown-DQow1lgx.js";import{T as B}from"./trash-2-K9P2zvhv.js";import{C as $}from"./calendar-Det4i6OO.js";import{H as L}from"./history-Cai_6Mq8.js";import{D as G}from"./database-fvimIxfV.js";import{S as H}from"./shield-Dzd3wczT.js";import"./vendor-utils-CrFdsnXa.js";import"./supabase-DgB9yu4v.js";const I=a("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),J=a("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),q=a("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),_=a("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),U=D()(T((e,s)=>({stats:[],lastResetDate:null,addGoal:s=>{e(e=>e.stats.find(e=>e.name===s)?{stats:e.stats.map(e=>e.name===s?{...e,goals:e.goals+1,lastUpdated:Date.now()}:e)}:{stats:[...e.stats,{name:s,goals:1,assists:0,lastUpdated:Date.now()}]})},addAssist:s=>{e(e=>e.stats.find(e=>e.name===s)?{stats:e.stats.map(e=>e.name===s?{...e,assists:e.assists+1,lastUpdated:Date.now()}:e)}:{stats:[...e.stats,{name:s,goals:0,assists:1,lastUpdated:Date.now()}]})},resetStats:s=>{e({stats:[],lastResetDate:s})},getStats:()=>{const{stats:e}=s();return e.sort((e,s)=>s.goals-e.goals||s.assists-e.assists||e.name.localeCompare(s.name))},shouldResetStats:e=>{const{lastResetDate:t}=s();return!!t&&e!==t}}),{name:"maestrosfc_player_stats",storage:V(()=>localStorage),partialize:e=>({stats:e.stats,lastResetDate:e.lastResetDate})})),Z={Preto:"bg-zinc-800 text-white border-2 border-zinc-300 dark:border-zinc-600",Verde:"bg-emerald-600 text-white border-2 border-emerald-300 dark:border-emerald-400",Cinza:"bg-slate-500 text-white border-2 border-slate-300 dark:border-slate-400",Vermelho:"bg-red-600 text-white border-2 border-red-300 dark:border-red-400"},Q=({color:e,className:t})=>s.jsx("span",{className:["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium w-8 h-8 shadow-md",Z[e],t||""].join(" ")}),Y=()=>{const{round:a,durationMin:h,events:D,allEvents:T,history:V,setDuration:L,start:G,pause:q,reset:Z,addGoal:Y,editGoal:X,deleteGoal:K,endRoundChooseNext:ee,getAllEvents:se,clearHistory:te,clearEvents:ae,clearAll:re,resetToInitialState:ne,recomputeScores:ie}=E(),{addGoal:le,addAssist:ce}=U(),{players:de,currentMatchId:oe,loadPlayersFromTeamDraw:me,getPlayersByTeam:xe,getActivePlayersByTeam:he,substitutePlayer:ue,addSubstitution:ge,getPlayerByName:je}=P();F();const{canControlMatch:pe}=M(),be=()=>{const e=[];return["Preto","Verde","Cinza","Vermelho"].forEach(s=>{xe(s).length>0&&e.push(s)}),e},{user:ve}=r(),fe=R(),Ne=a&&Array.isArray(a.inPlay)&&2===a.inPlay.length?a:{inPlay:["Preto","Verde"],scores:{},number:a?.number??1,running:!!a?.running},ze=Array.isArray(D)?D:[],we=Array.isArray(V)?V:[],ye=E(e=>{const s="number"==typeof e.now?e.now:Date.now();return("number"==typeof e.accumulatedSec?e.accumulatedSec:0)+(e.runningSince?Math.max(Math.floor((s-e.runningSince)/1e3),0):0)}),ke=ye>=60*h,Se=t.useRef(null);t.useEffect(()=>{const e=Se.current;if(e)if(ke&&!Ne.running)e.loop=!0,e.volume=.5,e.play().catch(()=>{});else try{e.pause(),e.currentTime=0}catch{}},[ke,Ne.running]),t.useEffect(()=>{Ne.running&&ke&&q()},[ke,Ne.running,q]);const Ae=t.useMemo(()=>Math.floor(ye/60).toString().padStart(2,"0")+":"+(ye%60).toString().padStart(2,"0"),[ye]),[Ce,Ee]=t.useState(!1),[Pe,De]=t.useState(null),[Te,Ve]=t.useState("Preto"),[Fe,Me]=t.useState(""),[Re,Oe]=t.useState("none"),[Be,$e]=t.useState(!1),[Le,Ge]=t.useState(null);t.useEffect(()=>{(async()=>{try{await me("")}catch(e){}})()},[me]);const[He,Ie]=t.useState(!1),[Je,qe]=t.useState("Preto"),[_e,Ue]=t.useState(!1),[Ze,Qe]=t.useState("Preto"),[Ye,We]=t.useState(""),[Xe,Ke]=t.useState(""),[es,ss]=t.useState(!1),[ts,as]=t.useState(null),[rs,ns]=t.useState(!1),[is,ls]=t.useState(null),[cs,ds]=t.useState(!1),[os,ms]=t.useState(null),[xs,hs]=t.useState(null);t.useEffect(()=>()=>{xs&&clearTimeout(xs)},[xs]);const us=()=>{xs&&(clearTimeout(xs),hs(null)),ns(!1),ls(null),ds(!1),ms(null)},gs=e=>{const s=xe(e);if(s.length>0){return s.map(e=>e.name)}return[]},js=e=>{De(e.id),Ve(e.team),Me(e.author||gs(e.team)[0]||""),Oe(e.assist??"none"),Ee(!0)},ps=e=>{Ge(e),$e(!0)};t.useEffect(()=>{Ce&&"none"!==Re&&Re===Fe&&Oe("none")},[Fe,Re,Ce]),t.useEffect(()=>{ie()},[ie]);const[bs,vs]=Ne.inPlay;Ne.scores[bs],Ne.scores[vs];const fs=["Preto","Verde","Cinza","Vermelho"].filter(e=>e!==bs&&e!==vs),Ns=t.useMemo(()=>{const e=Array.isArray(T)?T:[],s={};for(const t of e)t.author&&(s[t.author]=s[t.author]||{g:0,a:0},s[t.author].g+=1),t.assist&&(s[t.assist]=s[t.assist]||{g:0,a:0},s[t.assist].a+=1);return Object.entries(s).map(([e,s])=>({name:e,g:s.g,a:s.a})).sort((e,s)=>s.g-e.g||s.a-e.a||e.name.localeCompare(s.name))},[T]),[zs,ws]=t.useState("week"),ys=t.useMemo(()=>{const e=we;if("all"===zs)return e;const s=new Date;return e.filter(e=>{const t=new Date(e.ts);if("week"===zs){return(s.getTime()-t.getTime())/864e5<=7}return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()})},[we,zs]),ks=()=>{try{const e=Se.current;e&&(e.pause(),e.currentTime=0)}catch{}Z()},Ss=()=>{const[e,s]=a.inPlay;if((a.scores[e]??0)===(a.scores[s]??0))return void((e,s)=>{const t=["Preto","Verde","Cinza","Vermelho"];if(!t.includes(e)||!t.includes(s))return;us(),ds(!0),ns(!0);const a=setTimeout(()=>{const t=Math.random()>.5?e:s;ls(t),ds(!1),hs(null)},3e3);hs(a)})(e,s);const t=["Preto","Verde","Cinza","Vermelho"];if("Cinza"!==e&&"Cinza"!==s)qe("Cinza");else{const a=t.filter(t=>t!==e&&t!==s);qe(a[0]||"Preto")}Ie(!0)},As=e=>{const s=xe(e),t=he(e);return{playersOut:t.map(e=>e.name),playersIn:s.filter(e=>!t.find(s=>s.name===e.name)).map(e=>e.name)}};return s.jsxs("div",{className:"mx-auto w-full max-w-4xl px-4 py-5 pb-[120px] sm:pb-5",children:[s.jsx("header",{className:"bg-white dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700 shadow-sm rounded-lg mb-4",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-zinc-100",children:"Partida ao Vivo"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:["Rodada ",Ne.number]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:["owner"===ve?.role&&s.jsx(n,{variant:"ghost",size:"sm",onClick:()=>fe("/owner-dashboard"),className:"p-2 hover:bg-purple-100 dark:hover:bg-purple-900/30 hover:text-purple-700 dark:hover:text-purple-300 transition-colors",title:"Acesso rápido ao Dashboard do Owner",children:s.jsx(O,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),ve?.role&&"owner"!==ve.role&&s.jsxs("div",{className:"flex items-center space-x-1 text-sm text-maestros-green dark:text-green-400",children:[(e=>{switch(e){case"owner":return s.jsx(O,{className:"w-4 h-4 text-role-owner"});case"admin":return s.jsx(H,{className:"w-4 h-4 text-role-admin"});case"aux":return s.jsx(x,{className:"w-4 h-4 text-role-aux"});case"mensalista":return s.jsx(o,{className:"w-4 h-4 text-role-mensalista"});case"diarista":return s.jsx(x,{className:"w-4 h-4 text-role-diarista"});default:return s.jsx(d,{className:"w-4 h-4 text-role-default"})}})(ve.role),s.jsx("span",{className:"hidden sm:inline font-medium",children:"admin"===ve.role?"Admin":"aux"===ve.role?"Auxiliar":"mensalista"===ve.role?"Mensalista":"diarista"===ve.role?"Diarista":"Usuário"})]})]})]})}),s.jsx(i,{className:"mb-3 rounded-2xl border border-zinc-200 shadow-sm dark:border-zinc-800",children:s.jsx(l,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:["text-5xl sm:text-6xl font-extrabold tabular-nums",ke&&!Ne.running?"text-red-600 motion-safe:animate-pulse [animation-duration:350ms]":""].join(" "),"aria-live":"polite",children:Ae}),s.jsx("audio",{ref:Se,preload:"auto",className:"hidden",src:"data:audio/wav;base64,UklGRm4AAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABYAAAChAAAAAAAaAABSUQAA////AP///wD///8A////AP///wD///8A////AP///wD///8A"}),pe()&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(f,{className:"text-sm text-zinc-600",children:"Duração:"}),s.jsxs(N,{value:String(h),onValueChange:e=>L(Number(e)),disabled:Ne.running,children:[s.jsx(z,{className:"w-[110px]",children:s.jsx(w,{placeholder:"Minutos"})}),s.jsx(y,{children:[5,8,10,12,15].map(e=>s.jsxs(k,{value:String(e),children:[e," min"]},e))})]})]}),pe()&&s.jsxs("div",{className:"hidden w-full sm:grid grid-cols-3 gap-2",children:[Ne.running?s.jsx(n,{type:"button",onClick:q,className:"h-12 w-full bg-amber-500 hover:bg-amber-500/90",children:"Pausar"}):s.jsx(n,{type:"button",onClick:G,className:"h-12 w-full",children:"Iniciar"}),s.jsx(n,{type:"button",onClick:ks,className:"h-12 w-full bg-sky-500 hover:bg-sky-600 text-white",children:"Recomeçar"}),s.jsx(n,{type:"button",onClick:Ss,className:"h-12 w-full bg-rose-500 hover:bg-rose-600 text-white",children:"Encerrar"})]})]})})}),pe()&&s.jsx("div",{className:"md:hidden mb-3",children:s.jsx(i,{className:"rounded-2xl border border-zinc-200 shadow-sm dark:border-zinc-800",children:s.jsx(l,{className:"p-3",children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[Ne.running?s.jsx("button",{type:"button",onClick:q,className:"w-12 h-12 rounded-full bg-amber-500 hover:bg-amber-600 active:scale-95 transition-all duration-200 flex items-center justify-center text-white shadow-md hover:shadow-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})})}):s.jsx("button",{type:"button",onClick:G,className:"w-12 h-12 rounded-full bg-emerald-600 hover:bg-emerald-700 active:scale-95 transition-all duration-200 flex items-center justify-center text-white shadow-md hover:shadow-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 5v14l11-7z"})})}),s.jsx("button",{type:"button",onClick:ks,className:"w-12 h-12 rounded-full bg-sky-500 hover:bg-sky-600 active:scale-95 transition-all duration-200 flex items-center justify-center text-white shadow-md hover:shadow-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"})})}),s.jsx("button",{type:"button",onClick:Ss,className:"w-12 h-12 rounded-full bg-rose-500 hover:bg-rose-600 active:scale-95 transition-all duration-200 flex items-center justify-center text-white shadow-md hover:shadow-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M6 6h12v12H6z"})})})]})})})}),s.jsx(i,{className:"rounded-2xl border border-zinc-200 shadow-sm dark:border-zinc-800 mb-3",children:s.jsxs(l,{className:"p-4 sm:p-5",children:[s.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 mb-3",children:[s.jsx(c,{className:"h-4 w-4 text-emerald-600"})," Placar"]}),s.jsx("div",{className:"grid sm:grid-cols-2 gap-3",children:[bs,vs].map(e=>s.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-xl border px-3 py-2 min-h-12",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(Q,{color:e}),s.jsx("span",{className:"text-sm truncate",children:e})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg font-bold tabular-nums",children:Ne.scores[e]??0}),pe()&&be().length>0&&s.jsx(n,{type:"button",variant:"outline",size:"sm",onClick:()=>(e=>{Qe(e),We(""),Ke(""),Ue(!0)})(e),disabled:!Ne.running,"aria-label":"Substituição do "+e,className:"h-8 w-8 p-0",children:"⇄"}),pe()&&s.jsx(n,{type:"button",variant:"outline",size:"sm",onClick:()=>(e=>{Ne.running&&(De(null),Ve(e),Me(gs(e)[0]??""),Oe("none"),Ee(!0))})(e),disabled:!Ne.running,"aria-label":"Adicionar gol do "+e,className:"h-8 w-8 p-0",children:"+"})]})]},e))})]})}),s.jsx(i,{className:"rounded-2xl border border-zinc-200 shadow-sm dark:border-zinc-800 mb-3",children:s.jsxs(l,{className:"p-4 sm:p-5",children:[s.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Gols da partida"}),0===ze.length?s.jsx("p",{className:"text-sm text-zinc-500",children:"Nenhum gol registrado ainda."}):s.jsx("ul",{className:"space-y-2",children:ze.slice().reverse().map(e=>s.jsxs("li",{className:"flex items-center justify-between gap-2 rounded-lg border px-3 py-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Q,{color:e.team}),s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:s.jsx("strong",{children:e.author})}),e.assist&&s.jsxs("div",{className:"text-xs text-zinc-500",children:["assistência: ",e.assist]})]})]}),pe()&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(n,{type:"button",variant:"outline",size:"icon",className:"sm:hidden",onClick:()=>js(e),"aria-label":"Editar gol",title:"Editar",children:[s.jsx(J,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Editar"})]}),s.jsxs(n,{type:"button",variant:"secondary",size:"icon",className:"sm:hidden",onClick:()=>ps(e),"aria-label":"Excluir gol",title:"Excluir",children:[s.jsx(B,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Excluir"})]}),s.jsx(n,{type:"button",variant:"outline",size:"sm",className:"hidden sm:inline-flex",onClick:()=>js(e),children:"Editar"}),s.jsx(n,{type:"button",variant:"secondary",size:"sm",className:"hidden sm:inline-flex",onClick:()=>ps(e),children:"Excluir"})]})]},e.id))})]})}),s.jsx(i,{className:"rounded-2xl border border-zinc-200 shadow-sm dark:border-zinc-800 mb-3",children:s.jsxs(l,{className:"p-4 sm:p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(c,{className:"w-4 h-4 text-maestros-green"}),s.jsx("h3",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:"Estatísticas dos Jogadores"})]}),s.jsxs("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:[ze.length," ",1===ze.length?"gol":"gols"," nesta partida"]})]}),0===Ns.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center",children:s.jsx(c,{className:"w-6 h-6 text-zinc-400"})}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Nenhum gol registrado ainda"}),s.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:"Os gols aparecerão aqui conforme forem marcados"})]}):s.jsxs("div",{className:"space-y-3",children:[Ns.slice(0,3).map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-zinc-50 to-zinc-100 dark:from-zinc-800/50 dark:to-zinc-700/50 rounded-lg border border-zinc-200 dark:border-zinc-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm "+(0===t?"bg-yellow-500":1===t?"bg-gray-400":"bg-amber-600"),children:t+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm text-zinc-900 dark:text-zinc-100",children:e.name}),s.jsxs("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:[e.g+e.a," participações • ",e.g,"G ",e.a,"A"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:e.g}),s.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Gols"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:e.a}),s.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Assist."})]})]})]},e.name)),Ns.length>3&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-2",children:"Outros jogadores"}),Ns.slice(3).map(e=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-zinc-50 dark:bg-zinc-800/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-zinc-200 dark:bg-zinc-700 flex items-center justify-center",children:s.jsx(d,{className:"w-3 h-3 text-zinc-500"})}),s.jsx("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:e.name})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:[e.g,"G"]}),s.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[e.a,"A"]})]})]},e.name))]})]}),Ns.length>0&&s.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-700 dark:text-blue-300",children:[s.jsx(c,{className:"w-3 h-3"}),s.jsx("span",{children:'As estatísticas são persistentes e só zeram na próxima partida agendada ou ao usar "Reset Total"'})]})})]})}),s.jsx("div",{className:"mb-3",children:s.jsx(S,{value:zs,onValueChange:e=>ws(e),children:s.jsxs(A,{className:"grid grid-cols-3 w-full h-12 p-1 rounded-lg bg-zinc-100 dark:bg-zinc-800 items-center justify-center",children:[s.jsx(C,{value:"week",className:"flex items-center justify-center h-6 px-1.5 rounded text-xs font-medium transition-all data-[state=active]:bg-white data-[state=active]:text-zinc-900 data-[state=active]:shadow-sm dark:data-[state=active]:bg-zinc-700 dark:data-[state=active]:text-zinc-100 text-zinc-600 dark:text-zinc-300",children:"Semana"}),s.jsx(C,{value:"month",className:"flex items-center justify-center h-6 px-1.5 rounded text-xs font-medium transition-all data-[state=active]:bg-white data-[state=active]:text-zinc-900 data-[state=active]:shadow-sm dark:data-[state=active]:bg-zinc-700 dark:data-[state=active]:text-zinc-100 text-zinc-600 dark:text-zinc-300",children:"Mês"}),s.jsx(C,{value:"all",className:"flex items-center justify-center h-6 px-1.5 rounded text-xs font-medium transition-all data-[state=active]:bg-white data-[state=active]:text-zinc-900 data-[state=active]:shadow-sm dark:data-[state=active]:bg-zinc-700 dark:data-[state=active]:text-zinc-100 text-zinc-600 dark:text-zinc-300",children:"Todos"})]})})}),s.jsx(i,{className:"rounded-2xl border border-zinc-200 shadow-sm dark:border-zinc-800",children:s.jsxs(l,{className:"p-5 sm:p-7",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-4",children:"Histórico de Partidas"}),ys.length>0&&s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-zinc-50 to-zinc-100 dark:from-zinc-800/30 dark:to-zinc-700/30 rounded-lg border border-zinc-200/50 dark:border-zinc-700/50",children:[s.jsx("h4",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-3",children:"Estatísticas do Período"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:["Preto","Verde","Cinza","Vermelho"].map(e=>{const t=ys.reduce((s,t)=>{if(!(t.left===e||t.right===e))return s;const a=t.winner===e,r="Empate"===t.winner;return{games:s.games+1,wins:s.wins+(a?1:0),draws:s.draws+(r?1:0),losses:s.losses+(a||r?0:1),goalsFor:s.goalsFor+(t.left===e?t.leftScore:t.rightScore),goalsAgainst:s.goalsAgainst+(t.left===e?t.rightScore:t.leftScore)}},{games:0,wins:0,draws:0,losses:0,goalsFor:0,goalsAgainst:0});if(0===t.games)return null;const a=Math.round(t.wins/t.games*100);return s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-1 mb-2",children:[s.jsx(Q,{color:e}),s.jsx("span",{className:"text-xs font-medium text-zinc-600 dark:text-zinc-300",children:e})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:[t.games," ",1===t.games?"jogo":"jogos"]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs",children:[s.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:[t.wins,"V"]}),s.jsxs("span",{className:"text-amber-600 dark:text-amber-400 font-medium",children:[t.draws,"E"]}),s.jsxs("span",{className:"text-red-600 dark:text-red-400 font-medium",children:[t.losses,"D"]})]}),s.jsxs("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:[t.goalsFor,"-",t.goalsAgainst," gols"]}),s.jsxs("div",{className:"text-xs font-medium "+(a>=60?"text-emerald-600 dark:text-emerald-400":a>=40?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"),children:[a,"% vitórias"]})]})]},e)}).filter(Boolean)})]}),0===we.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center",children:s.jsx(c,{className:"w-8 h-8 text-zinc-400"})}),s.jsx("p",{className:"text-sm text-zinc-500",children:"Sem registros ainda."}),s.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:"As partidas aparecerão aqui após serem finalizadas"})]}):s.jsx("div",{className:"space-y-3",children:ys.map(e=>{const t=s=>e.winner===s,a="Empate"===e.winner,r=new Date(e.ts);return s.jsxs("button",{onClick:()=>(as(e),void ss(!0)),className:"w-full bg-zinc-50 dark:bg-zinc-800/50 rounded-xl p-4 border border-zinc-200/50 dark:border-zinc-700/50 hover:shadow-md hover:bg-zinc-100 dark:hover:bg-zinc-700/50 hover:border-maestros-green/30 transition-all duration-200 cursor-pointer group text-left",title:"Clique para ver os gols da partida",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"bg-maestros-green/10 text-maestros-green px-2 py-1 rounded-lg text-xs font-medium",children:["Rodada #",e.round]}),a&&s.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 px-2 py-1 rounded-lg text-xs font-medium",children:"Empate"})]}),s.jsxs("div",{className:"text-right relative",children:[s.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:r.toLocaleDateString("pt-BR")}),s.jsx("div",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:r.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}),s.jsx("div",{className:"absolute -top-1 -right-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("div",{className:"w-2 h-2 bg-maestros-green rounded-full animate-pulse"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-3 flex-1",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Q,{color:e.left}),s.jsx("span",{className:"font-medium text-sm "+(t(e.left)?"text-emerald-600 dark:text-emerald-400":"text-zinc-600 dark:text-zinc-300"),children:e.left}),t(e.left)&&s.jsx(c,{className:"w-4 h-4 text-emerald-500"})]})}),s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2",children:[s.jsx("div",{className:`text-xl font-bold transition-colors ${t(e.left)?"text-emerald-600 dark:text-emerald-400":"text-zinc-600 dark:text-zinc-400"} group-hover:text-maestros-green`,children:e.leftScore}),s.jsx("div",{className:"text-zinc-400 dark:text-zinc-500 font-medium group-hover:text-maestros-green transition-colors",children:"×"}),s.jsx("div",{className:`text-xl font-bold transition-colors ${t(e.right)?"text-emerald-600 dark:text-emerald-400":"text-zinc-600 dark:text-zinc-400"} group-hover:text-maestros-green`,children:e.rightScore})]}),s.jsx("div",{className:"flex items-center gap-3 flex-1 justify-end",children:s.jsxs("div",{className:"flex items-center gap-2",children:[t(e.right)&&s.jsx(c,{className:"w-4 h-4 text-emerald-500"}),s.jsx("span",{className:"font-medium text-sm "+(t(e.right)?"text-emerald-600 dark:text-emerald-400":"text-zinc-600 dark:text-zinc-300"),children:e.right}),s.jsx(Q,{color:e.right})]})})]})]},e.round+"-"+e.ts)})})]})}),s.jsx(u,{open:Ce,onOpenChange:e=>{Ee(e),e||De(null)},children:s.jsxs(g,{className:"z-[99999] max-w-md",children:[s.jsxs(j,{children:[s.jsx(p,{children:Pe?"Editar Gol":"Registrar Gol"}),s.jsxs(b,{children:["Autor pré-selecionado; assistência é opcional. Autoassistência não é permitida.",be().length>0?s.jsxs("div",{className:"mt-2 text-green-600 text-xs flex items-center gap-1",children:[s.jsx(o,{className:"w-3 h-3"}),"Usando jogadores do sorteio oficial"]}):s.jsxs("div",{className:"mt-2 text-amber-600 text-xs flex items-center gap-1",children:[s.jsx(d,{className:"w-3 h-3"}),"Usando jogadores de exemplo (carregue o sorteio)"]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"mr-2",children:"Time:"}),s.jsx(Q,{color:Te})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(f,{htmlFor:"goal-author",children:"Autor do gol"}),s.jsxs(N,{value:Fe,onValueChange:e=>{Me(e),Re===e&&Oe("none")},children:[s.jsx(z,{id:"goal-author",children:s.jsx(w,{placeholder:"Selecione o autor"})}),s.jsx(y,{className:"z-[100000]",position:"popper",sideOffset:5,children:gs(Te).map(e=>s.jsx(k,{value:e,children:e},e))})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(f,{htmlFor:"goal-assist",children:"Assistência (opcional)"}),s.jsxs(N,{value:Re,onValueChange:e=>{Oe(e)},children:[s.jsx(z,{id:"goal-assist",children:s.jsx(w,{placeholder:"Selecione (opcional)"})}),s.jsxs(y,{className:"z-[100000]",position:"popper",sideOffset:5,children:[s.jsx(k,{value:"none",children:"Sem assistência"}),gs(Te).filter(e=>e!==Fe).map(e=>s.jsx(k,{value:e,children:e},e))]})]})]})]}),s.jsxs(v,{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:['Debug: Autor atual = "',Fe,'" | Jogadores disponíveis = ',gs(Te).length]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(n,{type:"button",variant:"secondary",onClick:()=>{Ee(!1),De(null)},children:"Cancelar"}),s.jsx(n,{type:"button",onClick:()=>{if(!Fe)return void alert("Selecione o autor do gol");const e="none"===Re?null:Re;if(be().length>0)try{const s=je(Fe);if(!s)return void alert(`Jogador "${Fe}" não encontrado no sorteio`);if(s.team_color!==Te)return void alert(`Jogador "${Fe}" não pertence ao time ${Te}`);if(s.is_substitute)return void alert(`Jogador "${Fe}" está no banco e não pode marcar gol`);if(e){const s=je(e);if(!s)return void alert(`Jogador da assistência "${e}" não encontrado no sorteio`);if(s.team_color!==Te)return void alert(`Jogador da assistência "${e}" não pertence ao time ${Te}`);if(s.is_substitute)return void alert(`Jogador da assistência "${e}" está no banco`);if(Fe===e)return void alert("Jogador não pode dar assistência para si mesmo")}}catch(s){return void alert("Erro na validação: "+s.message)}try{Pe?X(Pe,{author:Fe,assist:e??null}):(Y({team:Te,author:Fe,assist:e??null}),le(Fe),e&&ce(e)),Ee(!1),De(null)}catch(s){alert("Erro ao salvar gol: "+s.message)}},children:Pe?"Salvar alterações":"Salvar Gol"})]})]})]})}),"owner"===ve?.role&&s.jsx(i,{className:"rounded-2xl border border-emerald-200 shadow-sm dark:border-emerald-800 mb-3",children:s.jsxs(l,{className:"p-4 sm:p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{className:"w-4 h-4 text-emerald-600"}),s.jsx("h3",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:"Exportar Relatório"})]}),s.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"PDF completo"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-zinc-50 dark:bg-zinc-800/30 rounded-lg",children:[s.jsx(c,{className:"w-4 h-4 text-yellow-500"}),s.jsxs("span",{className:"text-zinc-700 dark:text-zinc-300",children:[Ns.length," jogadores"]})]}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-zinc-50 dark:bg-zinc-800/30 rounded-lg",children:[s.jsx($,{className:"w-4 h-4 text-blue-500"}),s.jsxs("span",{className:"text-zinc-700 dark:text-zinc-300",children:[we.length," partidas"]})]})]}),s.jsxs(n,{onClick:async()=>{try{const{default:s}=await e(async()=>{const{default:e}=await import("./vendor-pdf-BlfB758B.js").then(e=>e.j);return{default:e}},__vite__mapDeps([0,1,2,3])),t=new s,a=t.internal.pageSize.getWidth(),r=t.internal.pageSize.getHeight();let n=20;t.setFontSize(20),t.setFont("helvetica","bold"),t.text("MAESTROS FC - RELATÓRIO DE PARTIDA",a/2,n,{align:"center"}),n+=10,t.setFontSize(12),t.setFont("helvetica","normal");const i=(new Date).toLocaleDateString("pt-BR");t.text(`Data: ${i}`,a/2,n,{align:"center"}),n+=20,t.setFontSize(16),t.setFont("helvetica","bold"),t.text("ESTATÍSTICAS DOS JOGADORES",20,n),n+=15,Ns.length>0?(t.setFontSize(10),t.setFont("helvetica","bold"),t.text("Posição",20,n),t.text("Jogador",40,n),t.text("Gols",120,n),t.text("Assistências",140,n),t.text("Total",170,n),n+=8,t.line(20,n,190,n),n+=5,t.setFont("helvetica","normal"),Ns.forEach((e,s)=>{n>r-30&&(t.addPage(),n=20);const a=e?.name||"Jogador Desconhecido",i=e?.g||0,l=e?.a||0,c=i+l;t.text(`${s+1}º`,20,n),t.text(a,40,n),t.text(i.toString(),120,n),t.text(l.toString(),140,n),t.text(c.toString(),170,n),n+=8})):(t.setFontSize(10),t.setFont("helvetica","italic"),t.text("Nenhuma estatística registrada",20,n),n+=10),n+=10,t.setFontSize(16),t.setFont("helvetica","bold"),t.text("HISTÓRICO DE PARTIDAS",20,n),n+=15,we.length>0?(t.setFontSize(10),t.setFont("helvetica","bold"),t.text("Rodada",20,n),t.text("Partida",40,n),t.text("Placar",120,n),t.text("Vencedor",140,n),t.text("Data/Hora",170,n),n+=8,t.line(20,n,190,n),n+=5,t.setFont("helvetica","normal"),we.forEach(e=>{n>r-30&&(t.addPage(),n=20);const s=e?.ts||Date.now(),a=e?.round||0,i=e?.left||"Time A",l=e?.right||"Time B",c=e?.leftScore||0,d=e?.rightScore||0,o=e?.winner||"Empate",m=new Date(s).toLocaleString("pt-BR"),x=`${c} x ${d}`,h=`${i} vs ${l}`;t.text(`#${a}`,20,n),t.text(h,40,n),t.text(x,120,n),t.text(o,140,n),t.text(m,170,n),n+=8})):(t.setFontSize(10),t.setFont("helvetica","italic"),t.text("Nenhuma partida registrada",20,n));const l=r-20;t.setFontSize(8),t.setFont("helvetica","italic"),t.text("Relatório gerado automaticamente pelo sistema Maestros FC",a/2,l,{align:"center"});const c=`maestros-fc-relatorio-${i.replace(/\//g,"-")}.pdf`;t.save(c)}catch(s){alert("Erro ao gerar PDF: "+s.message)}},className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white",children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"Exportar PDF"]})]})]})}),s.jsx(W,{clearEvents:ae,clearHistory:te,clearAll:re,resetToInitialState:ne,canControlMatch:pe()}),s.jsx(u,{open:Be,onOpenChange:e=>{$e(e),e||Ge(null)},children:s.jsxs(g,{children:[s.jsxs(j,{children:[s.jsx(p,{children:"Excluir gol?"}),s.jsx(b,{children:"Essa ação não pode ser desfeita. O placar será atualizado."})]}),Le&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm",children:"Time:"}),s.jsx(Q,{color:Le.team})]}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Autor:"})," ",Le.author]}),Le.assist&&s.jsxs("div",{className:"text-zinc-600",children:[s.jsx("strong",{children:"Assistência:"})," ",Le.assist]}),s.jsxs("div",{className:"text-zinc-600",children:[s.jsx("strong",{children:"Horário:"})," ",new Date(Le.ts).toLocaleTimeString()]})]})]}),s.jsxs(v,{children:[s.jsx(n,{type:"button",variant:"secondary",onClick:()=>{$e(!1),Ge(null)},children:"Não"}),s.jsx(n,{type:"button",className:"bg-red-600 hover:bg-red-600/90",onClick:()=>{Le&&(K(Le.id),$e(!1),Ge(null))},children:"Sim, excluir"})]})]})}),s.jsx(u,{open:He,onOpenChange:Ie,children:s.jsxs(g,{children:[s.jsxs(j,{children:[s.jsx(p,{children:"Encerrar rodada"}),s.jsx(b,{children:"O vencedor permanece. Escolha o próximo adversário ou deixe automático."})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(f,{children:"Próximo time a entrar"}),s.jsxs(N,{value:Je,onValueChange:e=>qe(e),children:[s.jsx(z,{children:s.jsx(w,{placeholder:"Selecione o próximo"})}),s.jsx(y,{children:fs.map(e=>s.jsx(k,{value:e,children:e},e))})]})]}),s.jsxs(v,{children:[s.jsx(n,{variant:"secondary",onClick:()=>Ie(!1),children:"Cancelar"}),s.jsx(n,{onClick:()=>{try{if(os){if(!["Preto","Verde","Cinza","Vermelho"].includes(Je))return;const{round:e,events:s}=E.getState(),[t,a]=e.inPlay,r=e.scores[t]??0,n=e.scores[a]??0,i={round:e.number,left:t,right:a,leftScore:r,rightScore:n,winner:os,ts:Date.now(),goals:[...s]},l=os,c=Je;E.setState({history:[...E.getState().history,i],round:{number:e.number+1,inPlay:[l,c],scores:{Preto:0,Verde:0,Cinza:0,Vermelho:0},running:!1},events:[],allEvents:[...E.getState().allEvents],accumulatedSec:0,runningSince:null}),Ie(!1),ms(null)}else ee(Je),Ie(!1)}catch(e){Ie(!1)}},children:"Confirmar"})]})]})}),s.jsx(u,{open:rs,onOpenChange:e=>{if(!e){if(cs)return void ns(!0);us()}},children:s.jsxs(g,{className:"max-w-md",children:[s.jsxs(j,{children:[s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(_,{className:"w-5 h-5 text-amber-500"}),cs?"Determinando Vencedor...":"Empate! Vencedor Sorteado"]}),s.jsx(b,{children:cs?"As cores dos times estão competindo para determinar o vencedor!":"O vencedor foi determinado por sorteio justo!"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-center items-center space-x-4",children:a.inPlay.map((e,t)=>{const a=!cs&&is===e;return s.jsx("div",{className:`\n                      w-16 h-16 rounded-full flex items-center justify-center text-white font-bold text-lg\n                      ${{Preto:"bg-zinc-800",Verde:"bg-green-500",Cinza:"bg-gray-500",Vermelho:"bg-red-500"}[e]}\n                      ${cs?"animate-pulse animate-bounce":""}\n                      ${a?"ring-4 ring-yellow-400 scale-110":""}\n                      transition-all duration-500\n                    `,children:cs?s.jsx(x,{className:"w-8 h-8 animate-spin"}):a?s.jsx(c,{className:"w-8 h-8 text-yellow-400"}):s.jsx("span",{className:"text-xs",children:e.charAt(0)})},e)})}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[a.scores[a.inPlay[0]]," - ",a.scores[a.inPlay[1]]]}),s.jsx("div",{className:"text-sm text-gray-500",children:"Empate!"})]}),!cs&&is&&s.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-semibold text-amber-800 mb-2",children:["🏆 Vencedor: ",is]}),s.jsxs("div",{className:"text-sm text-amber-600",children:["O time ",is," continuará na próxima rodada!"]})]})})]}),s.jsx(v,{children:!cs&&s.jsxs(n,{onClick:()=>{if(is)try{ms(is),ns(!1),ls(null),ds(!1),Ie(!0)}catch(e){us()}},className:"w-full bg-amber-600 hover:bg-amber-700 text-white",children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),"Continuar com ",is]})})]})}),s.jsx(u,{open:_e,onOpenChange:e=>{Ue(e),e||(We(""),Ke(""))},children:s.jsxs(g,{className:"z-[99999]",children:[s.jsxs(j,{children:[s.jsxs(p,{children:["Substituição - ",Ze]}),s.jsx(b,{children:"Selecione o jogador que sai e o que entra. A substituição será registrada no histórico."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"mr-2",children:"Time:"}),s.jsx(Q,{color:Ze})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(f,{children:"Jogador que sai (ativo)"}),s.jsxs(N,{value:Ye,onValueChange:We,children:[s.jsx(z,{children:s.jsx(w,{placeholder:"Selecione quem sai"})}),s.jsx(y,{children:As(Ze).playersOut.map(e=>s.jsx(k,{value:e,children:e},e))})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(f,{children:"Jogador que entra (banco)"}),s.jsxs(N,{value:Xe,onValueChange:Ke,children:[s.jsx(z,{children:s.jsx(w,{placeholder:"Selecione quem entra"})}),s.jsx(y,{children:As(Ze).playersIn.map(e=>s.jsx(k,{value:e,children:e},e))})]})]}),0===As(Ze).playersIn.length&&s.jsx("div",{className:"text-sm text-amber-600 bg-amber-50 p-2 rounded",children:"⚠️ Não há jogadores no banco para substituição"})]}),s.jsxs(v,{children:[s.jsx(n,{type:"button",variant:"secondary",onClick:()=>Ue(!1),children:"Cancelar"}),s.jsx(n,{type:"button",onClick:()=>{if(Ye&&Xe)if(Ye!==Xe)try{ge(Ze,Ye,Xe),Ue(!1),We(""),Ke("")}catch(e){alert("Erro ao realizar substituição: "+e.message)}else alert("Jogador que sai deve ser diferente do que entra");else alert("Selecione ambos os jogadores para a substituição")},disabled:!Ye||!Xe,children:"Confirmar Substituição"})]})]})}),s.jsx(u,{open:es,onOpenChange:ss,children:s.jsxs(g,{className:"max-w-md",children:[s.jsxs(j,{children:[s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(c,{className:"w-5 h-5 text-maestros-green"}),"Gols da Rodada #",ts?.round]}),s.jsx(b,{children:ts&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-medium",children:ts.left})," vs ",s.jsx("span",{className:"font-medium",children:ts.right}),s.jsxs("span",{className:"ml-2 text-sm",children:["(",ts.leftScore,"-",ts.rightScore,")"]})]})})]}),s.jsx("div",{className:"space-y-4",children:ts?.goals&&ts.goals.length>0?s.jsx("div",{className:"space-y-3",children:ts.goals.slice().sort((e,s)=>e.ts-s.ts).map((e,t)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200/50 dark:border-zinc-700/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 bg-zinc-200 dark:bg-zinc-700 px-2 py-1 rounded",children:[t+1,"º"]}),s.jsx(Q,{color:e.team})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm text-zinc-900 dark:text-zinc-100",children:e.author}),s.jsxs("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["(",e.team,")"]})]}),e.assist&&s.jsxs("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:["Assistência: ",s.jsx("span",{className:"font-medium",children:e.assist})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:new Date(e.ts).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})})]},e.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center",children:s.jsx(c,{className:"w-8 h-8 text-zinc-400"})}),s.jsx("p",{className:"text-sm text-zinc-500",children:"Nenhum gol foi marcado nesta rodada"}),s.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:"A partida terminou 0-0"})]})}),s.jsx(v,{children:s.jsx(n,{variant:"outline",onClick:()=>ss(!1),className:"w-full",children:"Fechar"})})]})})]})};function W({clearEvents:e,clearHistory:t,clearAll:a,resetToInitialState:r,canControlMatch:c}){return c?s.jsx(i,{className:"rounded-2xl border border-amber-200 bg-amber-50 shadow-sm dark:border-amber-800 dark:bg-amber-950/30 mt-6",children:s.jsxs(l,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(h,{className:"w-4 h-4 text-amber-600"}),s.jsx("h3",{className:"text-sm font-semibold text-amber-800 dark:text-amber-300",children:"Controles de Teste"})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[s.jsxs(n,{onClick:e,variant:"outline",size:"sm",className:"border-amber-300 text-amber-700 hover:bg-amber-100 dark:border-amber-700 dark:text-amber-400 dark:hover:bg-amber-900/50",children:[s.jsx(q,{className:"w-3 h-3 mr-1"}),"Limpar Gols"]}),s.jsxs(n,{onClick:t,variant:"outline",size:"sm",className:"border-amber-300 text-amber-700 hover:bg-amber-100 dark:border-amber-700 dark:text-amber-400 dark:hover:bg-amber-900/50",children:[s.jsx(L,{className:"w-3 h-3 mr-1"}),"Limpar Histórico"]}),s.jsxs(n,{onClick:a,variant:"outline",size:"sm",className:"border-amber-300 text-amber-700 hover:bg-amber-100 dark:border-amber-700 dark:text-amber-400 dark:hover:bg-amber-900/50",children:[s.jsx(G,{className:"w-3 h-3 mr-1"}),"Limpar Tudo"]}),s.jsxs(n,{onClick:()=>{r(),alert("Página resetada completamente! Estatísticas zeradas!")},variant:"outline",size:"sm",className:"border-red-300 text-red-700 hover:bg-red-100 dark:border-red-700 dark:text-red-400 dark:hover:bg-red-900/50",children:[s.jsx(B,{className:"w-3 h-3 mr-1"}),"Reset Total"]})]}),s.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-500 mt-2",children:"⚠️ Estes botões são para facilitar testes durante o desenvolvimento"})]})}):null}export{Y as Match,Y as default};
