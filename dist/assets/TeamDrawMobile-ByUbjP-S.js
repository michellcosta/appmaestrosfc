import{j as e}from"./vendor-ui-Cg0qxSES.js";import{c as s,B as a,R as r,C as t,f as i,d as l,e as n}from"./index-XxW9FBxQ.js";import{D as d,a as c,b as m,c as o,e as x,d as h}from"./dialog-C8tkcOsA.js";import{L as j}from"./label-CfKHBYYN.js";import{S as g,a as p,b as u,c as b,d as N}from"./select-DPwYioei.js";import{u as v}from"./useTeamDrawConvex-vOr6iHt4.js";import{u as f}from"./gamesStore-CEKKs3cA.js";import{r as y}from"./vendor-react-CyD6OLG_.js";import{d as w,u as C}from"./vendor-router-VFXGavtY.js";import{A as k}from"./arrow-left-DWClACLR.js";import{U as S}from"./user-minus-Dem5BnMf.js";import{U as T}from"./user-plus-2isPmhvc.js";import"./vendor-pdf-oqmhCI76.js";import"./vendor-utils-CrFdsnXa.js";import"./check-Cf6Eusfg.js";import"./middleware-BLDYzNRS.js";const D=s("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]),J={Preto:{bg:"bg-gray-800",text:"text-white",border:"border-gray-800"},Verde:{bg:"bg-green-600",text:"text-white",border:"border-green-600"},Cinza:{bg:"bg-gray-500",text:"text-white",border:"border-gray-500"},Vermelho:{bg:"bg-red-600",text:"text-white",border:"border-red-600"}};function $(){const{matchId:s}=w(),$=C(),{getUpcomingMatches:z}=f(),{players:P,teamDraw:M,loading:A,error:V,getPlayersByTeam:I,getAllAvailablePlayers:O,drawTeams:q,refreshTeamDraw:E,substitutePlayer:U,addPlayerToTeam:B,getTeamStats:L,hasTeamDraw:R,isTeamDrawComplete:F}=v(),[G,H]=y.useState(!1),[K,Q]=y.useState(!1),[Z,_]=y.useState(null),[W,X]=y.useState(null),[Y,ee]=y.useState(5),se=z(),ae=s?se.find(e=>e.id.toString()===s):null;y.useEffect(()=>{s&&E()},[s]);const re=e=>{switch(e){case"Goleiro":return"bg-yellow-100 text-yellow-800";case"Zagueiro":return"bg-blue-100 text-blue-800";case"Meia":return"bg-green-100 text-green-800";case"Atacante":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},te=s=>{const a=s||0;return e.jsx("div",{className:"flex items-center gap-1",children:[...Array(10)].map((s,r)=>e.jsx("div",{className:"h-3 w-3 rounded-full "+(r<a?"bg-yellow-400":"bg-gray-300")},r))})};return A?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando sorteio..."})]})}):s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-sm border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a,{onClick:()=>$("/home"),variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"⚽ Sorteio de Times"}),e.jsx("p",{className:"text-sm text-gray-600",children:ae?`${ae.date} - ${ae.time}`:"Partida não encontrada"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{onClick:E,variant:"outline",size:"sm",disabled:A,children:e.jsx(r,{className:"h-4 w-4 "+(A?"animate-spin":"")})}),e.jsxs(a,{onClick:()=>H(!0),className:"bg-green-600 hover:bg-green-700",disabled:A||0===P.length,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Sortear"]})]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx(t,{className:"bg-white shadow-sm mb-4",children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:P.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Jogadores"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:R?"✅":"❌"}),e.jsx("div",{className:"text-sm text-gray-600",children:R?"Times Sorteados":"Sem Times"})]})]})})}),R?e.jsx("div",{className:"space-y-4",children:Object.entries(L()).map(([s,r])=>{if(0===r.total)return null;const d=I(s),c=J[s];return e.jsxs(t,{className:"bg-white shadow-sm",children:[e.jsx(l,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(n,{className:`text-lg ${c.text} ${c.bg} px-3 py-1 rounded-full`,children:["Time ",s]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[r.active," titulares • ",r.substitutes," reservas"]})]})}),e.jsx(i,{className:"space-y-2",children:d.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:r.name||r.email.split("@")[0]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.position&&e.jsx("span",{className:`text-xs px-2 py-1 rounded ${re(r.position)}`,children:r.position}),te(r.stars)]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.is_substitute&&e.jsx("span",{className:"text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded",children:"Reserva"}),e.jsx(a,{onClick:()=>{_(r),X(s),Q(!0)},variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(S,{className:"h-3 w-3"})})]})]},r.id))})]},s)})}):e.jsx(t,{className:"bg-white shadow-sm",children:e.jsxs(i,{className:"text-center py-12",children:[e.jsx(D,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum time sorteado"}),e.jsx("p",{className:"text-gray-500 mb-4",children:'Clique em "Sortear" para criar os times automaticamente'}),e.jsxs(a,{onClick:()=>H(!0),className:"bg-green-600 hover:bg-green-700",disabled:0===P.length,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Sortear Times"]})]})}),R&&e.jsxs(t,{className:"bg-white shadow-sm mt-4",children:[e.jsx(l,{children:e.jsx(n,{className:"text-lg",children:"Jogadores Disponíveis"})}),e.jsx(i,{children:0===O().length?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Todos os jogadores foram distribuídos nos times"}):e.jsx("div",{className:"space-y-2",children:O().map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:s.name||s.email.split("@")[0]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.position&&e.jsx("span",{className:`text-xs px-2 py-1 rounded ${re(s.position)}`,children:s.position}),te(s.stars)]})]})}),e.jsx("div",{className:"flex gap-1",children:Object.keys(J).map(r=>e.jsx(a,{onClick:()=>((e,s)=>{B(e,s)})(s,r),variant:"outline",size:"sm",className:`h-8 w-8 p-0 ${J[r].border}`,children:e.jsx(T,{className:"h-3 w-3"})},r))})]},s.id))})})]})]}),e.jsx(d,{open:G,onOpenChange:H,children:e.jsxs(c,{className:"sm:max-w-md mx-4",children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Sortear Times"]}),e.jsx(x,{children:"Configure os parâmetros para o sorteio dos times."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"players-per-team",children:"Jogadores por time"}),e.jsxs(g,{value:Y.toString(),onValueChange:e=>ee(parseInt(e)),children:[e.jsx(p,{children:e.jsx(u,{})}),e.jsxs(b,{children:[e.jsx(N,{value:"5",children:"5 jogadores por time"}),e.jsx(N,{value:"6",children:"6 jogadores por time"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Jogadores disponíveis:"})," ",P.length]}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Times que serão criados:"})," ",Math.ceil(P.length/Y)]}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Jogadores por time:"})," ",Y]})]})]}),e.jsxs(h,{className:"gap-2",children:[e.jsx(a,{variant:"outline",onClick:()=>H(!1),className:"flex-1",children:"Cancelar"}),e.jsxs(a,{onClick:async()=>{if(s)try{await q(s,Y),H(!1)}catch(e){alert("Erro ao sortear times. Verifique se há jogadores suficientes.")}},className:"flex-1 bg-green-600 hover:bg-green-700",disabled:0===P.length,children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Sortear"]})]})]})}),e.jsx(d,{open:K,onOpenChange:Q,children:e.jsxs(c,{className:"sm:max-w-md mx-4",children:[e.jsxs(m,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Substituir Jogador"]}),e.jsxs(x,{children:["Escolha um jogador para substituir ",Z?.name||Z?.email.split("@")[0],"."]})]}),e.jsx("div",{className:"space-y-4",children:W&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Jogadores disponíveis para substituição:"}),O().map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:s.name||s.email.split("@")[0]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.position&&e.jsx("span",{className:`text-xs px-2 py-1 rounded ${re(s.position)}`,children:s.position}),te(s.stars)]})]})}),e.jsx(a,{onClick:()=>{return e=Z.id,a=s.id,U(e,a,W),Q(!1),_(null),void X(null);var e,a},variant:"outline",size:"sm",children:"Substituir"})]},s.id))]})}),e.jsx(h,{children:e.jsx(a,{variant:"outline",onClick:()=>Q(!1),className:"w-full",children:"Cancelar"})})]})}),e.jsx("div",{className:"h-20"})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"ID da partida não encontrado"}),e.jsx(a,{onClick:()=>$("/home"),children:"Voltar ao Início"})]})})}export{$ as default};
