import{j as e}from"./vendor-ui-Bl6_fDik.js";import{r as s}from"./vendor-react-BSMgdr9Q.js";import{C as a,a as r,B as i}from"./index-D-h0AB1a.js";import{I as o}from"./input-BNNcVYdw.js";import{L as l}from"./label-BetwYsf8.js";import{supabase as n}from"./supabase-DgB9yu4v.js";import"./vendor-router-uw2sfKrb.js";import"./vendor-supabase-5K_8OYiR.js";import"./vendor-utils-CrFdsnXa.js";function t(){const[t,c]=s.useState(""),[d,m]=s.useState(""),[u,p]=s.useState(""),[h,j]=s.useState(!1),[x,f]=s.useState("");return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Criar Usuário Owner"}),e.jsx("p",{className:"text-sm text-zinc-500",children:"Esta página cria um usuário Owner diretamente no Supabase"}),e.jsx(a,{children:e.jsxs(r,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:"Nome Completo"}),e.jsx(o,{id:"name",value:d,onChange:e=>m(e.target.value),placeholder:"Seu nome completo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",type:"email",value:t,onChange:e=>c(e.target.value),placeholder:"seu@email.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"password",children:"Senha"}),e.jsx(o,{id:"password",type:"password",value:u,onChange:e=>p(e.target.value),placeholder:"Sua senha"})]}),e.jsx(i,{onClick:async()=>{if(t&&d&&u){j(!0),f("");try{const{data:e,error:s}=await n.auth.signUp({email:t,password:u,options:{data:{full_name:d}}});if(s)return f(`❌ Erro no auth: ${s.message}`),void j(!1);if(e.user){await new Promise(e=>setTimeout(e,1e3));const{error:s}=await n.from("users").insert({auth_id:e.user.id,email:t,name:d,role:"owner",aprovado:!0});if(s){const{error:a}=await n.from("profiles").insert({id:e.user.id,email:t,role:"owner"});f(a?`❌ Erro ao criar perfil: ${s.message} | Profiles: ${a.message}`:"✅ Usuário Owner criado com sucesso (via profiles)!")}else f("✅ Usuário Owner criado com sucesso!")}}catch(e){f(`❌ Erro: ${e.message}`)}j(!1)}else f("❌ Preencha todos os campos")},disabled:h,className:"w-full",children:h?"Criando...":"Criar Usuário Owner"}),x&&e.jsx("div",{className:"p-3 rounded-lg "+(x.includes("✅")?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:x})]})}),e.jsx(a,{children:e.jsxs(r,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Instruções:"}),e.jsxs("ol",{className:"text-sm space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Preencha seus dados acima"}),e.jsx("li",{children:'Clique em "Criar Usuário Owner"'}),e.jsx("li",{children:"Verifique seu email para confirmar a conta"}),e.jsx("li",{children:"Faça login na página de Perfil"})]})]})})]})}export{t as default};
