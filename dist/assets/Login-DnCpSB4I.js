const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/supabase-DgB9yu4v.js","assets/vendor-supabase-5K_8OYiR.js","assets/vendor-react-BSMgdr9Q.js","assets/vendor-ui-Bl6_fDik.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./vendor-supabase-5K_8OYiR.js";import{j as s}from"./vendor-ui-Bl6_fDik.js";import{c as t,C as a,d as r,e as o,a as n,B as l,h as i,u as c}from"./index-DBWRIsnn.js";import{S as d}from"./save-fyQAbF6e.js";import{U as m}from"./users-DW197LJ0.js";import{C as u}from"./crown-CS2b_OQ-.js";import{U as x}from"./user-plus-6yxTROpn.js";import{r as h,b as g}from"./vendor-react-BSMgdr9Q.js";import{u as p}from"./vendor-router-uw2sfKrb.js";import{G as f}from"./globe-CU7h6oYX.js";import{S as b}from"./shield-CfpdltVH.js";import"./vendor-utils-CrFdsnXa.js";const j=t("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function w(){return s.jsxs(a,{className:"max-w-md mx-auto mt-8",children:[s.jsx(r,{children:s.jsxs(o,{className:"flex items-center gap-2",children:[s.jsx(d,{className:"h-5 w-5 text-blue-500"}),"Debug: Salvar Usuário"]})}),s.jsxs(n,{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Use estes botões para debugar o sistema de usuários."}),s.jsxs(l,{onClick:()=>{const e=localStorage.getItem("offline_user");if(e)try{const s=JSON.parse(e),t=JSON.parse(localStorage.getItem("all_users")||"[]");if(t.some(e=>e.id===s.id))alert(`ℹ️ Usuário ${s.email} já existe no histórico`);else{const e={...s,loginDate:(new Date).toISOString(),lastSeen:(new Date).toISOString()};t.push(e),localStorage.setItem("all_users",JSON.stringify(t)),alert(`✅ Usuário ${s.email} adicionado ao histórico!`)}}catch(s){alert("❌ Erro ao salvar usuário: "+s.message)}else alert("❌ Nenhum usuário logado")},className:"w-full",variant:"default",children:[s.jsx(d,{className:"h-4 w-4 mr-2"}),"Forçar Salvamento do Usuário Atual"]}),s.jsxs(l,{onClick:()=>{const e=localStorage.getItem("all_users");if(e){const s=JSON.parse(e);alert(`📋 ${s.length} usuário(s) no histórico. Verifique o console para detalhes.`)}else alert("📭 Nenhum usuário no histórico")},className:"w-full",variant:"outline",children:[s.jsx(m,{className:"h-4 w-4 mr-2"}),"Ver Usuários no Histórico"]}),s.jsx("p",{className:"text-xs text-gray-500 text-center",children:'Depois de salvar, vá para "Listar Usuários" para ver o resultado'})]})]})}function N(){return s.jsxs(a,{className:"max-w-md mx-auto mt-8",children:[s.jsx(r,{children:s.jsxs(o,{className:"flex items-center gap-2",children:[s.jsx(u,{className:"h-5 w-5 text-yellow-500"}),"Recriar Conta Michell Costa"]})}),s.jsxs(n,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 rounded-lg",children:[s.jsx(i,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium text-yellow-800",children:"Acesso Owner Perdido"}),s.jsx("p",{className:"text-yellow-700",children:"Michell Costa, se você perdeu acesso como owner, use este botão para recriar sua conta."})]})]}),s.jsxs(l,{onClick:()=>{localStorage.removeItem("offline_user");const e={id:crypto.randomUUID(),email:"michellcosta1269@gmail.com",name:"Michell Costa - Owner",role:"owner",group_id:`group_${Date.now()}`,avatar:null,created_at:(new Date).toISOString()};localStorage.setItem("offline_user",JSON.stringify(e)),window.location.reload()},className:"w-full",variant:"default",children:[s.jsx(x,{className:"h-4 w-4 mr-2"}),"Recriar Conta Michell Costa"]}),s.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Isso irá limpar qualquer usuário existente e criar a conta owner de Michell Costa"})]})]})}function v(){const t=p(),{user:a}=c(),[r,o]=h.useState(!1),[n,l]=h.useState("");h.useEffect(()=>{a&&t("/home")},[a,t]),h.useEffect(()=>{const e=localStorage.getItem("offline_user");if(e)try{const s=JSON.parse(e);"owner@maestros.com"===s.email&&"Owner Teste"===s.name&&(localStorage.removeItem("offline_user"),localStorage.removeItem("user_data"),localStorage.removeItem("player_data"))}catch(s){}},[]);const i=e=>{o(!0),l(`🔄 Entrando como ${e} teste...`);try{localStorage.removeItem("offline_user"),localStorage.removeItem("user_data");const s={id:"owner"===e?"owner-test-"+Date.now():"admin-test-"+Date.now(),email:"owner"===e?"owner@maestros.com":"admin@maestros.com",name:"owner"===e?"Owner Teste":"Admin Teste",role:e,group_id:`group_${Date.now()}`};localStorage.setItem("offline_user",JSON.stringify(s)),l(`✅ Conectado como ${s.name}!`),setTimeout(()=>{l(""),t("/home")},1e3)}catch(s){l(`❌ Erro ao fazer login offline: ${s}`)}finally{setTimeout(()=>{o(!1)},1500)}};return g.useEffect(()=>()=>{},[]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-emerald-100 dark:from-zinc-900 dark:via-zinc-800 dark:to-zinc-900 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 opacity-30",children:s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-100/20 to-blue-100/20 dark:from-green-900/10 dark:to-blue-900/10"})}),s.jsx("div",{className:"absolute top-10 left-10 w-3 h-3 bg-green-400 rounded-full animate-pulse opacity-60"}),s.jsx("div",{className:"absolute top-32 right-20 w-2 h-2 bg-blue-400 rounded-full animate-pulse delay-1000 opacity-60"}),s.jsx("div",{className:"absolute bottom-20 left-1/4 w-4 h-4 bg-emerald-400 rounded-full animate-pulse delay-2000 opacity-60"}),s.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-full mb-4 shadow-lg",children:s.jsx(f,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-3xl font-bold text-zinc-900 dark:text-white mb-2",children:"Maestros FC"}),s.jsx("p",{className:"text-zinc-600 dark:text-zinc-400",children:"Entre na sua conta para jogar"})]}),s.jsxs("div",{className:"shadow-2xl border-0 bg-white/95 dark:bg-zinc-900/95 backdrop-blur-lg rounded-2xl border border-white/20 dark:border-zinc-800/50",children:[s.jsxs("div",{className:"text-center pb-6 pt-8 px-8",children:[s.jsxs("div",{className:"text-xl font-semibold text-zinc-800 dark:text-zinc-200 flex items-center justify-center gap-2 mb-2",children:[s.jsx(b,{className:"w-5 h-5 text-green-600"}),"Bem-vindo de volta!"]}),s.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Faça login com sua conta Google para continuar"})]}),s.jsxs("div",{className:"space-y-6 px-8 pb-8",children:[s.jsx("button",{onClick:async()=>{o(!0),l("🔄 Conectando com o Google...");try{const{supabase:s}=await e(async()=>{const{supabase:e}=await import("./supabase-DgB9yu4v.js");return{supabase:e}},__vite__mapDeps([0,1,2,3])),t=`${window.location.origin}/home`,{data:a,error:r}=await s.auth.signInWithOAuth({provider:"google",options:{redirectTo:t,queryParams:{access_type:"offline",prompt:"consent"}}});if(r){const e=r?.message||"",s=r?.status;403===s||e.includes("403")||e.toLowerCase().includes("forbidden")?l(`❌ **ERRO 403 - Google OAuth não configurado**\n\n🔧 **PASSO A PASSO PARA CONFIGURAR:**\n\n1️⃣ **Google Cloud Console:**\n   • https://console.cloud.google.com → Credentials\n   • Create OAuth 2.0 Client ID → Web Application\n   • Authorized domains: ${window.location.origin}\n   • Redirect URIs: https://autxxmhtadimwvprfsov.supabase.co/auth/v1/callback\n\n2️⃣ **Supabase Dashboard:**\n   • Authentication → Providers → Google\n   • Enable ✓ | Insert Google Client ID & Secret\n\nError: [${s}] ${e}`):e.toLowerCase().includes("invalid_client")||e.toLowerCase().includes("client_id")?l(`❌ **Client inválido**\n\n🔄 **Configurar Google OAuth:**\n1. Google Console → Criar OAuth credentials\n2. Copiar dados para Supabase\n3. Verificar URLs no Supabase\n\nDetalhes: ${e}`):l(`❌ **Google Login falhou**\n\nStatus: ${s||"desconhecido"}\nMensagem: ${e}\n\nConfigurar: (A) Google OAuth (B) Supabase Auth (C) URLs corretos`)}else if(a)return void l("🔄 Aguarde... Redirecionando para Google...")}catch(s){const e=s?.message||s?.toString()||"Unknown error";l(`❌ **Erro de Conexão**\n\nDetalhes: ${e}\n\n**Diagnóstico:** 1. Chamada OAuth failed 2. Supabase/URL issues. Setup check: (A) Supabase keys OK, (B) Google OAuth configured, (C) Network ok`)}setTimeout(()=>{o(!1)},2e3)},disabled:r,className:"w-full h-14 bg-white hover:bg-zinc-50 text-zinc-900 border-2 border-zinc-200 hover:border-zinc-300 hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-4 rounded-xl font-medium text-base disabled:opacity-50",children:r?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-zinc-400 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"font-medium",children:"Conectando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center justify-center bg-white rounded-lg p-1",children:s.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),s.jsx("span",{className:"font-semibold",children:"Continuar com Google"}),s.jsx(j,{className:"w-5 h-5 ml-auto"})]})}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[s.jsx(b,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Login protegido e seguro"})]}),s.jsx("div",{className:"text-xs text-zinc-500 dark:text-zinc-500",children:"Ao continuar, você concorda com nossos termos de uso"})]}),n&&s.jsx("div",{className:"p-4 rounded-xl "+(n.includes("❌")?"bg-red-50 border border-red-200 dark:bg-red-900/20 dark:border-red-800":"bg-green-50 border border-green-200 dark:bg-green-900/20 dark:border-green-800"),children:s.jsx("p",{className:"text-sm font-medium text-center whitespace-pre-line "+(n.includes("❌")?"text-red-800 dark:text-red-300":"text-green-800 dark:text-green-300"),children:n})}),s.jsxs("div",{className:"pt-4 border-t border-zinc-200 dark:border-zinc-700",children:[s.jsxs("button",{onClick:()=>t("/create-owner-google"),className:"w-full py-3 px-4 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 rounded-lg text-white font-medium text-sm transition-colors duration-200 text-center flex items-center justify-center gap-2",children:[s.jsx(b,{className:"w-4 h-4 text-purple-200"}),"👑 Criar Conta Owner com Google"]}),s.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 text-center mt-2",children:"Primeira vez? Crie sua conta como proprietário"})]})]})]}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-4",children:"Ou faça login offline para testes"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>i("owner"),disabled:r,className:"w-full py-3 px-4 bg-zinc-800 hover:bg-zinc-700 disabled:opacity-50 rounded-lg text-white font-medium text-sm transition-colors duration-200 text-center flex items-center justify-center gap-2",children:[s.jsx(b,{className:"w-4 h-4 text-yellow-400"}),"Entrar como Owner Teste (Offline)"]}),s.jsxs("button",{onClick:()=>i("admin"),disabled:r,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 rounded-lg text-white font-medium text-sm transition-colors duration-200 text-center flex items-center justify-center gap-2",children:[s.jsx(b,{className:"w-4 h-4 text-blue-200"}),"Entrar como Admin Teste (Offline)"]})]})]}),s.jsxs("div",{className:"text-center mt-8 space-y-2",children:[s.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:["Não tem conta Google? "," ",s.jsx("a",{href:"https://accounts.google.com/signup",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-500 font-medium underline decoration-1 underline-offset-2",children:"Criar uma grátis"})]}),s.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"Suporte técnico disponível 24/7"})]})]}),s.jsx(N,{}),s.jsx(w,{}),s.jsx("div",{className:"fixed bottom-4 right-4 w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-full shadow-lg animate-bounce opacity-80",children:s.jsx("div",{className:"flex items-center justify-center w-full h-full",children:s.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})})})]})}export{v as default};
