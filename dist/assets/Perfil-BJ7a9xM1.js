import{j as e,c as r,a as s,u as t,b as a,d as o,e as i,P as l,f as n,g as c,h as d}from"./vendor-ui-Bl6_fDik.js";import{r as m}from"./vendor-react-BSMgdr9Q.js";import{c as u,B as x,C as h,a as p,T as g,j as f,b,u as j,S as v,R as y,Z as w,d as N,U as k,e as C}from"./index-DBWRIsnn.js";import{c as S,u as M}from"./gamesStore-NUrBWBVY.js";import{u as z}from"./usePermissions-DFAum_ix.js";import{supabase as P}from"./supabase-DgB9yu4v.js";import{B as _}from"./badge-CAWDyCDP.js";import{I as A}from"./input-Cio5NqjA.js";import{S as D,a as q,b as R,c as E,d as G,C as T}from"./select-DrLdwjNV.js";import{S as I}from"./search-BaGgDe3v.js";import{u as $}from"./matchStore-BjvAJycv.js";import{D as F,a as L,b as O,c as V,e as U}from"./dialog-BFatDTMR.js";import{S as B,M as H,E as K}from"./sun-RlLvKa0n.js";import{M as Y}from"./mail-IvzrN_aR.js";import{C as J}from"./copy-BP9JoqPB.js";import{C as W}from"./clock-BNhg4M-W.js";import{C as X}from"./calendar-C56Ik9bs.js";import{u as Z}from"./vendor-router-uw2sfKrb.js";import{C as Q}from"./crown-CS2b_OQ-.js";import{S as ee}from"./square-pen-CmfRWkCr.js";import{S as re}from"./shield-CfpdltVH.js";import{U as se}from"./users-DW197LJ0.js";import{U as te}from"./user-plus-6yxTROpn.js";import{L as ae}from"./log-out-BDTGdmi-.js";import"./vendor-supabase-5K_8OYiR.js";import"./vendor-utils-CrFdsnXa.js";const oe=u("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ie=u("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),le=u("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),ne=u("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]),ce=u("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),de=u("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),me=u("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ue=u("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function xe(e){const[r,s]=m.useState({totalGoals:0,totalAssists:0,totalMatches:0,consecutiveMatches:0,totalPayments:0,victories:0,draws:0,defeats:0,averageGoals:0,participation:0,totalTimePlayed:0,totalYellowCards:0,totalRedCards:0,averageRating:0,goalsPerMatch:0,assistsPerMatch:0,manOfMatchCount:0,lastMatchDate:null}),[t,a]=m.useState(!0),[o,i]=m.useState(null),[l,n]=m.useState([]),[c,d]=m.useState([]);m.useEffect(()=>{if(!e)return;const r=async()=>{try{a(!0),i(null);const{data:r,error:t}=await P.from("player_statistics").select("*").eq("player_id",e).single(),{data:o,error:l}=await P.from("goal_events").select("*").eq("player_id",e).order("created_at",{ascending:!1}),{data:c,error:m}=await P.from("goal_events").select("*").eq("assist_player_id",e).order("created_at",{ascending:!1}),{data:u,error:x}=await P.from("player_matches").select("*").eq("player_id",e).order("created_at",{ascending:!1});t&&t.code;const h=r?{totalGoals:r.total_goals||0,totalAssists:r.total_assists||0,totalMatches:r.total_matches||0,consecutiveMatches:0,totalPayments:0,victories:r.wins||0,draws:r.draws||0,defeats:r.losses||0,averageGoals:r.goals_per_match||0,participation:r.total_matches>0?Math.min(95,5*r.total_matches):0,totalTimePlayed:r.total_minutes_played||0,totalYellowCards:r.total_yellow_cards||0,totalRedCards:r.total_red_cards||0,averageRating:r.average_rating||0,goalsPerMatch:r.goals_per_match||0,assistsPerMatch:r.assists_per_match||0,manOfMatchCount:r.man_of_match_count||0,lastMatchDate:r.last_match_date||null}:{totalGoals:o?.length||0,totalAssists:c?.length||0,totalMatches:u?.length||0,consecutiveMatches:0,totalPayments:0,victories:0,draws:0,defeats:0,averageGoals:u?.length>0?Number(((o?.length||0)/u.length).toFixed(2)):0,participation:u?.length>0?Math.min(95,5*u.length):0,totalTimePlayed:u?.reduce((e,r)=>e+(r.minutes_played||0),0)||0,totalYellowCards:u?.reduce((e,r)=>e+(r.yellow_cards||0),0)||0,totalRedCards:u?.reduce((e,r)=>e+(r.red_cards||0),0)||0,averageRating:u?.length>0?Number((u.reduce((e,r)=>e+(r.rating||0),0)/u.length).toFixed(1)):0,goalsPerMatch:u?.length>0?Number(((o?.length||0)/u.length).toFixed(2)):0,assistsPerMatch:u?.length>0?Number(((c?.length||0)/u.length).toFixed(2)):0,manOfMatchCount:u?.filter(e=>e.is_man_of_match).length||0,lastMatchDate:u?.[0]?.created_at||null};n(o||[]),d(u||[]),s(h)}catch(r){i("Erro ao carregar estat√≠sticas em tempo real"),s({totalGoals:0,totalAssists:0,totalMatches:0,consecutiveMatches:0,totalPayments:0,victories:0,draws:0,defeats:0,averageGoals:0,participation:0,totalTimePlayed:0,totalYellowCards:0,totalRedCards:0,averageRating:0,goalsPerMatch:0,assistsPerMatch:0,manOfMatchCount:0,lastMatchDate:null})}finally{a(!1)}};r();const t=setInterval(()=>{r()},3e4);return()=>{clearInterval(t)}},[e]);return{stats:r,loading:t,error:o,goalEvents:l,playerMatches:c,addGoal:async(r,t,a,o="Preto",i=0,l=1,n=!1,c=!1)=>{try{const{data:d,error:m}=await P.from("goal_events").insert({match_id:r,player_id:t,assist_player_id:a,team_color:o,minute:i,round_number:l,is_own_goal:n,is_penalty:c,created_by:e}).select().single();if(m)throw m;return s(e=>({...e,totalGoals:e.totalGoals+1,goalsPerMatch:e.totalMatches>0?Number(((e.totalGoals+1)/e.totalMatches).toFixed(2)):0})),await fetchPlayerStats(),d}catch(d){throw d}},addPlayerMatch:async(e,r,t,a="field",o=90)=>{try{const{data:i,error:l}=await P.from("player_matches").insert({player_id:r,match_id:e,team_color:t,position:a,minutes_played:o,goals_scored:0,assists:0,yellow_cards:0,red_cards:0,rating:0,is_man_of_match:!1}).select().single();if(l)throw l;return s(e=>({...e,totalMatches:e.totalMatches+1,totalTimePlayed:e.totalTimePlayed+o})),await fetchPlayerStats(),i}catch(i){throw i}},refreshStats:async()=>{await fetchPlayerStats()}}}const he=S()((e,r)=>({lastUpdate:Date.now(),isRealtime:!1,subscribedPlayers:[],achievementListeners:{},subscribePlayerUpdates:r=>{e(e=>({subscribedPlayers:[...e.subscribedPlayers.filter(e=>e!==r),r],isRealtime:!0}))},unsubscribePlayerUpdates:r=>{e(e=>({subscribedPlayers:e.subscribedPlayers.filter(e=>e!==r),achievementListeners:Object.fromEntries(Object.entries(e.achievementListeners).filter(([e])=>e!==r))}))},triggerStatsUpdate:e=>{},loading:{}})),pe={basicas:{name:"B√°sicas",color:"green",description:"Primeiros passos no futebol",icon:"ü•â"},intermediarias:{name:"Intermedi√°rias",color:"blue",description:"Desenvolvendo suas habilidades",icon:"ü•à"},avancadas:{name:"Avan√ßadas",color:"purple",description:"Dominando o jogo",icon:"ü•á"},lendarias:{name:"Lend√°rias",color:"gold",description:"Lendas do futebol",icon:"üíé"},performance:{name:"Performance",color:"rainbow",description:"Habilidades especiais",icon:"‚≠ê"},especiais:{name:"Especiais",color:"unique",description:"Conquistas √∫nicas",icon:"üëë"}},ge={common:{name:"Comum",color:"from-green-400 to-emerald-500",borderColor:"border-green-300 dark:border-green-600",bgColor:"bg-green-50 dark:bg-green-900/20",textColor:"text-green-800 dark:text-green-300"},rare:{name:"Rara",color:"from-blue-400 to-cyan-500",borderColor:"border-blue-300 dark:border-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20",textColor:"text-blue-800 dark:text-blue-300"},epic:{name:"√âpica",color:"from-purple-400 to-violet-500",borderColor:"border-purple-300 dark:border-purple-600",bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-800 dark:text-purple-300"},legendary:{name:"Lend√°ria",color:"from-yellow-400 to-orange-500",borderColor:"border-yellow-300 dark:border-yellow-600",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",textColor:"text-yellow-800 dark:text-yellow-300"},mythic:{name:"M√≠tica",color:"from-pink-400 to-rose-500",borderColor:"border-pink-300 dark:border-pink-600",bgColor:"bg-pink-50 dark:bg-pink-900/20",textColor:"text-pink-800 dark:text-pink-300"},unique:{name:"√önica",color:"from-yellow-400 to-orange-500",borderColor:"border-yellow-300 dark:border-yellow-600",bgColor:"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20",textColor:"text-yellow-800 dark:text-yellow-300"}};function fe(e,r){const s=[];return s.push({id:"first-goal",name:"Primeiro Gol",emoji:"‚öΩ",description:"1¬∫ gol da vida",requirement:1,current:e.totalGoals,unlocked:e.totalGoals>=1,color:ge.common.color,borderColor:ge.common.borderColor,rarity:"common",category:"basicas"}),s.push({id:"first-assist",name:"Primeira Assist",emoji:"üéØ",description:"1¬™ assist√™ncia",requirement:1,current:e.totalAssists,unlocked:e.totalAssists>=1,color:ge.common.color,borderColor:ge.common.borderColor,rarity:"common",category:"basicas"}),s.push({id:"debutante",name:"Debutante",emoji:"‚≠ê",description:"1¬™ partida",requirement:1,current:e.totalMatches,unlocked:e.totalMatches>=1,color:ge.common.color,borderColor:ge.common.borderColor,rarity:"common",category:"basicas"}),s.push({id:"first-payment",name:"Primeiro Pago",emoji:"üí∞",description:"1¬∫ pagamento",requirement:1,current:e.totalPayments,unlocked:e.totalPayments>=1,color:ge.common.color,borderColor:ge.common.borderColor,rarity:"common",category:"basicas"}),s.push({id:"primeiro-passo",name:"Primeiro Passo",emoji:"üèÉ",description:"Participar de 1 partida",requirement:1,current:e.totalMatches,unlocked:e.totalMatches>=1,color:ge.common.color,borderColor:ge.common.borderColor,rarity:"common",category:"basicas"}),s.push({id:"boas-vindas",name:"Boas Vindas",emoji:"üëã",description:"Fazer login pela primeira vez",requirement:1,current:e.loginDays||0,unlocked:(e.loginDays||0)>=1,color:ge.common.color,borderColor:ge.common.borderColor,rarity:"common",category:"basicas"}),s.push({id:"nao-falto-uma",name:"N√£o Falto Uma",emoji:"üîó",description:"5 partidas seguidas",requirement:5,current:e.consecutiveMatches,unlocked:e.consecutiveMatches>=5,color:ge.rare.color,borderColor:ge.rare.borderColor,rarity:"rare",category:"intermediarias"}),s.push({id:"presente",name:"Presente",emoji:"üî•",description:"5 partidas total",requirement:5,current:e.totalMatches,unlocked:e.totalMatches>=5,color:ge.rare.color,borderColor:ge.rare.borderColor,rarity:"rare",category:"intermediarias"}),s.push({id:"velocista",name:"Velocista",emoji:"‚ö°",description:"Fazer 3 gols em 1 partida",requirement:3,current:0,unlocked:!1,color:ge.rare.color,borderColor:ge.rare.borderColor,rarity:"rare",category:"intermediarias"}),s.push({id:"precisao",name:"Precis√£o",emoji:"üéØ",description:"5 assist√™ncias em 1 partida",requirement:5,current:0,unlocked:!1,color:ge.rare.color,borderColor:ge.rare.borderColor,rarity:"rare",category:"intermediarias"}),s.push({id:"resistencia",name:"Resist√™ncia",emoji:"üí™",description:"Jogar 3 partidas seguidas",requirement:3,current:e.consecutiveMatches,unlocked:e.consecutiveMatches>=3,color:ge.rare.color,borderColor:ge.rare.borderColor,rarity:"rare",category:"intermediarias"}),s.push({id:"maratonista",name:"Maratonista",emoji:"üèÉ",description:"10 partidas em 1 m√™s",requirement:10,current:e.monthlyMatches||0,unlocked:(e.monthlyMatches||0)>=10,color:ge.rare.color,borderColor:ge.rare.borderColor,rarity:"rare",category:"intermediarias"}),s.push({id:"artilheiro",name:"Artilheiro",emoji:"ü•ä",description:"15+ gols total",requirement:15,current:e.totalGoals,unlocked:e.totalGoals>=15,color:ge.epic.color,borderColor:ge.epic.borderColor,rarity:"epic",category:"avancadas"}),s.push({id:"criador",name:"Criador",emoji:"‚ö°",description:"10+ assist√™ncias",requirement:10,current:e.totalAssists,unlocked:e.totalAssists>=10,color:ge.epic.color,borderColor:ge.epic.borderColor,rarity:"epic",category:"avancadas"}),s.push({id:"rei-futebol",name:"Rei do Futebol",emoji:"üëë",description:"50 gols totais",requirement:50,current:e.totalGoals,unlocked:e.totalGoals>=50,color:ge.epic.color,borderColor:ge.epic.borderColor,rarity:"epic",category:"avancadas"}),s.push({id:"mestre-assistencias",name:"Mestre das Assist√™ncias",emoji:"üé™",description:"25 assist√™ncias totais",requirement:25,current:e.totalAssists,unlocked:e.totalAssists>=25,color:ge.epic.color,borderColor:ge.epic.borderColor,rarity:"epic",category:"avancadas"}),s.push({id:"campeao",name:"Campe√£o",emoji:"üèÜ",description:"20 vit√≥rias totais",requirement:20,current:e.victories,unlocked:e.victories>=20,color:ge.epic.color,borderColor:ge.epic.borderColor,rarity:"epic",category:"avancadas"}),s.push({id:"estrela",name:"Estrela",emoji:"‚≠ê",description:"100 partidas jogadas",requirement:100,current:e.totalMatches,unlocked:e.totalMatches>=100,color:ge.epic.color,borderColor:ge.epic.borderColor,rarity:"epic",category:"avancadas"}),s.push({id:"lenda-viva",name:"Lenda Viva",emoji:"üî•",description:"100 gols totais",requirement:100,current:e.totalGoals,unlocked:e.totalGoals>=100,color:ge.legendary.color,borderColor:ge.legendary.borderColor,rarity:"legendary",category:"lendarias"}),s.push({id:"mestre-supremo",name:"Mestre Supremo",emoji:"‚ö°",description:"50 assist√™ncias totais",requirement:50,current:e.totalAssists,unlocked:e.totalAssists>=50,color:ge.legendary.color,borderColor:ge.legendary.borderColor,rarity:"legendary",category:"lendarias"}),s.push({id:"imperador",name:"Imperador",emoji:"üëë",description:"50 vit√≥rias totais",requirement:50,current:e.victories,unlocked:e.victories>=50,color:ge.legendary.color,borderColor:ge.legendary.borderColor,rarity:"legendary",category:"lendarias"}),s.push({id:"lenda",name:"Lenda",emoji:"üåü",description:"200 partidas jogadas",requirement:200,current:e.totalMatches,unlocked:e.totalMatches>=200,color:ge.legendary.color,borderColor:ge.legendary.borderColor,rarity:"legendary",category:"lendarias"}),s.push({id:"campeao-absoluto",name:"Campe√£o Absoluto",emoji:"üèÜ",description:"100 vit√≥rias totais",requirement:100,current:e.victories,unlocked:e.victories>=100,color:ge.legendary.color,borderColor:ge.legendary.borderColor,rarity:"legendary",category:"lendarias"}),s.push({id:"idolo",name:"√çdolo",emoji:"‚≠ê",description:"500 partidas jogadas",requirement:500,current:e.totalMatches,unlocked:e.totalMatches>=500,color:ge.legendary.color,borderColor:ge.legendary.borderColor,rarity:"legendary",category:"lendarias"}),s.push({id:"raio",name:"Raio",emoji:"‚ö°",description:"Gol em menos de 1 minuto",requirement:1,current:e.fastestGoal&&e.fastestGoal<60?1:0,unlocked:(e.fastestGoal||999)<60,color:ge.mythic.color,borderColor:ge.mythic.borderColor,rarity:"mythic",category:"performance"}),s.push({id:"atirador-elite",name:"Atirador de Elite",emoji:"üéØ",description:"90% de precis√£o em gols",requirement:90,current:e.goalAccuracy||0,unlocked:(e.goalAccuracy||0)>=90,color:ge.mythic.color,borderColor:ge.mythic.borderColor,rarity:"mythic",category:"performance"}),s.push({id:"muralha",name:"Muralha",emoji:"üõ°Ô∏è",description:"0 gols sofridos em 5 partidas",requirement:5,current:e.cleanSheets||0,unlocked:(e.cleanSheets||0)>=5,color:ge.mythic.color,borderColor:ge.mythic.borderColor,rarity:"mythic",category:"performance"}),s.push({id:"hat-trick",name:"Hat-trick",emoji:"üî•",description:"3 gols em 1 partida",requirement:1,current:e.hatTricks||0,unlocked:(e.hatTricks||0)>=1,color:ge.mythic.color,borderColor:ge.mythic.borderColor,rarity:"mythic",category:"performance"}),s.push({id:"assistencia-perfeita",name:"Assist√™ncia Perfeita",emoji:"üé™",description:"5 assist√™ncias em 1 partida",requirement:1,current:e.perfectAssists||0,unlocked:(e.perfectAssists||0)>=1,color:ge.mythic.color,borderColor:ge.mythic.borderColor,rarity:"mythic",category:"performance"}),s.push({id:"mvp",name:"MVP",emoji:"üëë",description:"Melhor jogador da partida",requirement:1,current:e.mvpCount||0,unlocked:(e.mvpCount||0)>=1,color:ge.mythic.color,borderColor:ge.mythic.borderColor,rarity:"mythic",category:"performance"}),"owner"===r&&s.push({id:"grande-lider",name:"O GRANDE L√çDER",emoji:"üëë",description:"Soberano Supremo",requirement:1,current:1,unlocked:!0,color:ge.unique.color,borderColor:ge.unique.borderColor,rarity:"unique",category:"especiais"}),s.forEach(e=>{!e.unlocked&&e.requirement>0&&(e.progress=Math.min(100,e.current/e.requirement*100))}),s}function be({playerStats:r,userRole:s,onClose:t}){const[a,o]=m.useState(""),[i,l]=m.useState("all"),[n,c]=m.useState("all"),[d,u]=m.useState(!1),f=m.useMemo(()=>fe(r,s),[r,s]),b=m.useMemo(()=>{let e=f;var r,s;return a.trim()&&(e=function(e,r){if(!r.trim())return e;const s=r.toLowerCase();return e.filter(e=>e.name.toLowerCase().includes(s)||e.description.toLowerCase().includes(s))}(e,a)),"all"!==i&&(r=e,e="all"===(s=i)?r:r.filter(e=>e.category===s)),"all"!==n&&(e=function(e,r){return"all"===r?e:e.filter(e=>e.rarity===r)}(e,n)),d&&(e=e.filter(e=>e.unlocked)),e},[f,a,i,n,d]),j=m.useMemo(()=>function(e){const r=e.length,s=e.filter(e=>e.unlocked).length;return{total:r,unlocked:s,locked:r-s,progress:r>0?Math.round(s/r*100):0,byCategory:e.reduce((e,r)=>(e[r.category]=(e[r.category]||0)+1,e),{}),byRarity:e.reduce((e,r)=>(e[r.rarity]=(e[r.rarity]||0)+1,e),{})}}(f),[f]),v=({figurinha:r})=>e.jsx(h,{className:`\n      relative overflow-hidden transition-all duration-300 hover:scale-105\n      ${r.unlocked?`bg-gradient-to-br ${r.color} ${ge[r.rarity].bgColor} border-2 ${r.borderColor}`:"bg-muted/50 border-muted"}\n    `,children:e.jsxs(p,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-3xl",children:r.emoji}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:r.unlocked?"default":"secondary",className:`\n                ${r.unlocked?`bg-gradient-to-r ${r.color} text-white`:"bg-muted text-muted-foreground"}\n              `,children:ge[r.rarity].name}),r.unlocked&&e.jsx(g,{className:"h-4 w-4 text-yellow-500"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:`font-bold text-lg ${r.unlocked?ge[r.rarity].textColor:"text-muted-foreground"}`,children:r.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description}),!r.unlocked&&void 0!==r.progress&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Progresso"}),e.jsxs("span",{children:[Math.round(r.progress),"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${r.progress}%`}})}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[r.current," / ",r.requirement]})]}),r.unlocked&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx(g,{className:"h-3 w-3"}),e.jsx("span",{children:"Desbloqueada!"})]})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Cat√°logo de Figurinhas"}),e.jsxs("p",{className:"text-muted-foreground",children:[j.unlocked," de ",j.total," figurinhas desbloqueadas (",j.progress,"%)"]})]}),t&&e.jsx(x,{variant:"outline",onClick:t,children:"Fechar"})]}),e.jsx(h,{children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:j.unlocked}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Desbloqueadas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:j.locked}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Bloqueadas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[j.progress,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Progresso"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:j.total}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]})]})})}),e.jsx(h,{children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(A,{placeholder:"Buscar figurinhas...",value:a,onChange:e=>o(e.target.value),className:"pl-10"})]}),e.jsxs(D,{value:i,onValueChange:l,children:[e.jsx(q,{children:e.jsx(R,{placeholder:"Categoria"})}),e.jsxs(E,{children:[e.jsx(G,{value:"all",children:"Todas as categorias"}),Object.entries(pe).map(([r,s])=>e.jsxs(G,{value:r,children:[s.icon," ",s.name]},r))]})]}),e.jsxs(D,{value:n,onValueChange:c,children:[e.jsx(q,{children:e.jsx(R,{placeholder:"Raridade"})}),e.jsxs(E,{children:[e.jsx(G,{value:"all",children:"Todas as raridades"}),Object.entries(ge).map(([r,s])=>e.jsx(G,{value:r,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-gradient-to-r ${s.color}`}),s.name]})},r))]})]}),e.jsxs(x,{variant:d?"default":"outline",onClick:()=>u(!d),className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"}),d?"Todas":"Desbloqueadas"]}),e.jsxs(x,{variant:"outline",onClick:()=>{o(""),l("all"),c("all"),u(!1)},className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),"Limpar"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:b.map(r=>e.jsx(v,{figurinha:r},r.id))}),0===b.length&&e.jsx(h,{children:e.jsxs(p,{className:"p-8 text-center",children:[e.jsx(g,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma figurinha encontrada"}),e.jsx("p",{className:"text-muted-foreground",children:"Tente ajustar os filtros para encontrar as figurinhas que procura."})]})})]})}function je(){const{theme:r,setTheme:s}=f(),t=[{id:"light",label:"Claro",icon:B},{id:"dark",label:"Escuro",icon:H},{id:"auto",label:"Autom√°tico",icon:le}];return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xs font-medium text-zinc-600 dark:text-zinc-400",children:"Tema:"}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-zinc-700 p-1 rounded-lg",children:t.map(t=>{const a=t.icon,o=r===t.id;return e.jsx("button",{className:"h-8 w-8 p-0 transition-all duration-200 border-0 rounded-md flex items-center justify-center "+(o?"bg-maestros-green hover:bg-maestros-green/90 text-white shadow-sm":"bg-transparent hover:bg-maestros-green/10 text-gray-600 dark:text-gray-300 hover:text-maestros-green"),onClick:()=>s(t.id),title:t.label,children:e.jsx(a,{className:"w-4 h-4"})},t.id)})})]})}var ve=["PageUp","PageDown"],ye=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],we={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ne="Slider",[ke,Ce,Se]=r(Ne),[Me,ze]=s(Ne,[Se]),[Pe,_e]=Me(Ne),Ae=m.forwardRef((r,s)=>{const{name:o,min:i=0,max:l=100,step:n=1,orientation:c="horizontal",disabled:u=!1,minStepsBetweenThumbs:x=0,defaultValue:h=[i],value:p,onValueChange:g=()=>{},onValueCommit:f=()=>{},inverted:b=!1,form:j,...v}=r,y=m.useRef(new Set),w=m.useRef(0),N="horizontal"===c?Re:Ee,[k=[],C]=t({prop:p,defaultProp:h,onChange:e=>{const r=[...y.current];r[w.current]?.focus(),g(e)}}),S=m.useRef(k);function M(e,r,{commit:s}={commit:!1}){const t=function(e){return(String(e).split(".")[1]||"").length}(n),a=function(e,r){const s=Math.pow(10,r);return Math.round(e*s)/s}(Math.round((e-i)/n)*n+i,t),o=d(a,[i,l]);C((e=[])=>{const t=function(e=[],r,s){const t=[...e];return t[s]=r,t.sort((e,r)=>e-r)}(e,o,r);if(function(e,r){if(r>0){const s=function(e){return e.slice(0,-1).map((r,s)=>e[s+1]-r)}(e);return Math.min(...s)>=r}return!0}(t,x*n)){w.current=t.indexOf(o);const r=String(t)!==String(e);return r&&s&&f(t),r?t:e}return e})}return e.jsx(Pe,{scope:r.__scopeSlider,name:o,disabled:u,min:i,max:l,valueIndexToChangeRef:w,thumbs:y.current,values:k,orientation:c,form:j,children:e.jsx(ke.Provider,{scope:r.__scopeSlider,children:e.jsx(ke.Slot,{scope:r.__scopeSlider,children:e.jsx(N,{"aria-disabled":u,"data-disabled":u?"":void 0,...v,ref:s,onPointerDown:a(v.onPointerDown,()=>{u||(S.current=k)}),min:i,max:l,inverted:b,onSlideStart:u?void 0:function(e){const r=function(e,r){if(1===e.length)return 0;const s=e.map(e=>Math.abs(e-r)),t=Math.min(...s);return s.indexOf(t)}(k,e);M(e,r)},onSlideMove:u?void 0:function(e){M(e,w.current)},onSlideEnd:u?void 0:function(){const e=S.current[w.current];k[w.current]!==e&&f(k)},onHomeKeyDown:()=>!u&&M(i,0,{commit:!0}),onEndKeyDown:()=>!u&&M(l,k.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:r})=>{if(!u){const s=ve.includes(e.key)||e.shiftKey&&ye.includes(e.key)?10:1,t=w.current;M(k[t]+n*s*r,t,{commit:!0})}}})})})})});Ae.displayName=Ne;var[De,qe]=Me(Ne,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Re=m.forwardRef((r,s)=>{const{min:t,max:a,dir:l,inverted:n,onSlideStart:c,onSlideMove:d,onSlideEnd:u,onStepKeyDown:x,...h}=r,[p,g]=m.useState(null),f=o(s,e=>g(e)),b=m.useRef(void 0),j=i(l),v="ltr"===j,y=v&&!n||!v&&n;function w(e){const r=b.current||p.getBoundingClientRect(),s=He([0,r.width],y?[t,a]:[a,t]);return b.current=r,s(e-r.left)}return e.jsx(De,{scope:r.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:e.jsx(Ge,{dir:j,"data-orientation":"horizontal",...h,ref:f,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const r=w(e.clientX);c?.(r)},onSlideMove:e=>{const r=w(e.clientX);d?.(r)},onSlideEnd:()=>{b.current=void 0,u?.()},onStepKeyDown:e=>{const r=we[y?"from-left":"from-right"].includes(e.key);x?.({event:e,direction:r?-1:1})}})})}),Ee=m.forwardRef((r,s)=>{const{min:t,max:a,inverted:i,onSlideStart:l,onSlideMove:n,onSlideEnd:c,onStepKeyDown:d,...u}=r,x=m.useRef(null),h=o(s,x),p=m.useRef(void 0),g=!i;function f(e){const r=p.current||x.current.getBoundingClientRect(),s=He([0,r.height],g?[a,t]:[t,a]);return p.current=r,s(e-r.top)}return e.jsx(De,{scope:r.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:e.jsx(Ge,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const r=f(e.clientY);l?.(r)},onSlideMove:e=>{const r=f(e.clientY);n?.(r)},onSlideEnd:()=>{p.current=void 0,c?.()},onStepKeyDown:e=>{const r=we[g?"from-bottom":"from-top"].includes(e.key);d?.({event:e,direction:r?-1:1})}})})}),Ge=m.forwardRef((r,s)=>{const{__scopeSlider:t,onSlideStart:o,onSlideMove:i,onSlideEnd:n,onHomeKeyDown:c,onEndKeyDown:d,onStepKeyDown:m,...u}=r,x=_e(Ne,t);return e.jsx(l.span,{...u,ref:s,onKeyDown:a(r.onKeyDown,e=>{"Home"===e.key?(c(e),e.preventDefault()):"End"===e.key?(d(e),e.preventDefault()):ve.concat(ye).includes(e.key)&&(m(e),e.preventDefault())}),onPointerDown:a(r.onPointerDown,e=>{const r=e.target;r.setPointerCapture(e.pointerId),e.preventDefault(),x.thumbs.has(r)?r.focus():o(e)}),onPointerMove:a(r.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:a(r.onPointerUp,e=>{const r=e.target;r.hasPointerCapture(e.pointerId)&&(r.releasePointerCapture(e.pointerId),n(e))})})}),Te="SliderTrack",Ie=m.forwardRef((r,s)=>{const{__scopeSlider:t,...a}=r,o=_e(Te,t);return e.jsx(l.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...a,ref:s})});Ie.displayName=Te;var $e="SliderRange",Fe=m.forwardRef((r,s)=>{const{__scopeSlider:t,...a}=r,i=_e($e,t),n=qe($e,t),c=m.useRef(null),d=o(s,c),u=i.values.length,x=i.values.map(e=>Be(e,i.min,i.max)),h=u>1?Math.min(...x):0,p=100-Math.max(...x);return e.jsx(l.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...a,ref:d,style:{...r.style,[n.startEdge]:h+"%",[n.endEdge]:p+"%"}})});Fe.displayName=$e;var Le="SliderThumb",Oe=m.forwardRef((r,s)=>{const t=Ce(r.__scopeSlider),[a,i]=m.useState(null),l=o(s,e=>i(e)),n=m.useMemo(()=>a?t().findIndex(e=>e.ref.current===a):-1,[t,a]);return e.jsx(Ve,{...r,ref:l,index:n})}),Ve=m.forwardRef((r,s)=>{const{__scopeSlider:t,index:i,name:c,...d}=r,u=_e(Le,t),x=qe(Le,t),[h,p]=m.useState(null),g=o(s,e=>p(e)),f=!h||(u.form||!!h.closest("form")),b=n(h),j=u.values[i],v=void 0===j?0:Be(j,u.min,u.max),y=function(e,r){return r>2?`Value ${e+1} of ${r}`:2===r?["Minimum","Maximum"][e]:void 0}(i,u.values.length),w=b?.[x.size],N=w?function(e,r,s){const t=e/2,a=He([0,50],[0,t]);return(t-a(r)*s)*s}(w,v,x.direction):0;return m.useEffect(()=>{if(h)return u.thumbs.add(h),()=>{u.thumbs.delete(h)}},[h,u.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[x.startEdge]:`calc(${v}% + ${N}px)`},children:[e.jsx(ke.ItemSlot,{scope:r.__scopeSlider,children:e.jsx(l.span,{role:"slider","aria-label":r["aria-label"]||y,"aria-valuemin":u.min,"aria-valuenow":j,"aria-valuemax":u.max,"aria-orientation":u.orientation,"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,tabIndex:u.disabled?void 0:0,...d,ref:g,style:void 0===j?{display:"none"}:r.style,onFocus:a(r.onFocus,()=>{u.valueIndexToChangeRef.current=i})})}),f&&e.jsx(Ue,{name:c??(u.name?u.name+(u.values.length>1?"[]":""):void 0),form:u.form,value:j},i)]})});Oe.displayName=Le;var Ue=m.forwardRef(({__scopeSlider:r,value:s,...t},a)=>{const i=m.useRef(null),n=o(i,a),d=c(s);return m.useEffect(()=>{const e=i.current;if(!e)return;const r=window.HTMLInputElement.prototype,t=Object.getOwnPropertyDescriptor(r,"value").set;if(d!==s&&t){const r=new Event("input",{bubbles:!0});t.call(e,s),e.dispatchEvent(r)}},[d,s]),e.jsx(l.input,{style:{display:"none"},...t,ref:n,defaultValue:s})});function Be(e,r,s){return d(100/(s-r)*(e-r),[0,100])}function He(e,r){return s=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const t=(r[1]-r[0])/(e[1]-e[0]);return r[0]+t*(s-e[0])}}Ue.displayName="RadioBubbleInput";var Ke=Ae,Ye=Ie,Je=Fe,We=Oe;const Xe=m.forwardRef(({className:r,...s},t)=>e.jsxs(Ke,{ref:t,className:b("relative flex w-full touch-none select-none items-center",r),...s,children:[e.jsx(Ye,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Je,{className:"absolute h-full bg-primary"})}),e.jsx(We,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));function Ze({imageSrc:r,onCropComplete:s,onCancel:t}){const a=m.useRef(null),o=m.useRef(null),[i,l]=m.useState(1),[n,c]=m.useState(0),[d,u]=m.useState({x:0,y:0}),[h,p]=m.useState(!1),[g,f]=m.useState({x:0,y:0}),[b,j]=m.useState(!1),v=m.useCallback(()=>{const e=a.current,r=o.current;if(!e||!r||!b)return;const s=e.getContext("2d");if(!s)return;const t=300;e.width=t,e.height=t,s.clearRect(0,0,t,t),s.save(),s.beginPath(),s.arc(150,150,150,0,2*Math.PI),s.clip();s.translate(150+d.x,150+d.y),s.rotate(n*Math.PI/180),s.scale(i,i);const l=r.naturalWidth/r.naturalHeight;let c,m;l>1?(m=t,c=t*l):(c=t,m=t/l),s.drawImage(r,-c/2,-m/2,c,m),s.restore()},[i,n,d,b]);m.useEffect(()=>{b&&v()},[v,b]);const y=()=>{p(!1)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("img",{ref:o,src:r,alt:"Original",className:"hidden",onLoad:()=>{j(!0)}}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("canvas",{ref:a,className:"border-2 border-zinc-200 rounded-full cursor-move select-none",style:{width:"300px",height:"300px",touchAction:"none"},onMouseDown:e=>{e.preventDefault(),p(!0),f({x:e.clientX-d.x,y:e.clientY-d.y})},onMouseMove:e=>{h&&(e.preventDefault(),u({x:e.clientX-g.x,y:e.clientY-g.y}))},onMouseUp:y,onMouseLeave:y,onTouchStart:e=>{e.preventDefault();const r=e.touches[0];p(!0),f({x:r.clientX-d.x,y:r.clientY-d.y})},onTouchMove:e=>{if(!h)return;e.preventDefault();const r=e.touches[0];u({x:r.clientX-g.x,y:r.clientY-g.y})},onTouchEnd:()=>{p(!1)},onWheel:e=>{e.preventDefault();const r=e.deltaY>0?-.1:.1,s=Math.max(.5,Math.min(3,i+r));l(s)}}),e.jsx("div",{className:"absolute inset-0 border-2 border-dashed border-zinc-400 rounded-full pointer-events-none opacity-50"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),"Zoom"]}),e.jsxs("span",{className:"text-sm text-zinc-500",children:[Math.round(100*i),"%"]})]}),e.jsx(Xe,{value:[i],onValueChange:e=>{l(e[0])},min:.5,max:3,step:.1,className:"w-full"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>{c(e=>(e+90)%360)},className:"flex-1 flex items-center justify-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Girar"]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>{l(1),c(0),u({x:0,y:0})},className:"flex-1",children:"Resetar"})]}),e.jsxs("div",{className:"text-xs text-zinc-500 text-center space-y-1",children:[e.jsxs("p",{className:"flex items-center justify-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3"}),"Arraste para mover a imagem"]}),e.jsx("p",{children:"Use o scroll do mouse ou slider para zoom"}),e.jsx("p",{children:"Toque e arraste funciona no mobile"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(x,{variant:"outline",onClick:t,className:"flex-1",children:"Cancelar"}),e.jsx(x,{onClick:()=>{try{const e=a.current;if(!e)return;const r=document.createElement("canvas"),t=r.getContext("2d");if(!t)return;const o=512;r.width=o,r.height=o,t.drawImage(e,0,0,o,o);const i=r.toDataURL("image/jpeg",.9);s(i)}catch(e){alert("Erro ao processar a imagem")}},className:"flex-1 bg-green-600 hover:bg-green-700",children:"Aplicar Recorte"})]})]})}function Qe(){const[e,r]=m.useState([]),[s,t]=m.useState(!1),a=e=>{try{localStorage.setItem("maestrosfc_simple_invites",JSON.stringify(e)),r(e)}catch(s){}};return{invites:e,loading:s,createInvite:async(r,s)=>{t(!0);try{const o=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let r="";for(let s=0;s<8;s++)r+=e.charAt(Math.floor(36*Math.random()));return r})(),i=window.location.host.includes("localhost")||window.location.host.includes("192.168")||window.location.port.includes("808"),l=`${i?"https://maestrosfc.com.br":window.location.origin}/join?code=${o}&type=${r}`,n=((e,r)=>{const s="mensalista"===e?"Mensalista":"Diarista",t="mensalista"===e?"‚≠ê":"‚ö°";return`üèÜ MAESTROS FC - CONVITE ${s.toUpperCase()}! ${t}\n\nOl√°! Voc√™ foi convidado para participar do nosso grupo de futebol como ${s.toLowerCase()}!\n\n‚öΩ Partidas regulares\nüë• Grupo ativo e organizado  \nüèÜ Sistema de ranking\nüí∞ ${"mensalista"===e?"Mensalidade acess√≠vel":"Pagamento por partida"}\n\nüîó Entre agora: ${r}\n\n#MaestrosFC #Futebol #Pelada`})(r,l),c={id:`invite_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:r,code:o,link:l,message:n,createdAt:(new Date).toISOString(),expiresAt:new Date(Date.now()+864e5).toISOString(),createdBy:s},d=[...e,c];return a(d),t(!1),c}catch(o){return t(!1),null}},copyToClipboard:async e=>{if(navigator.clipboard)try{return await navigator.clipboard.writeText(e),!0}catch(r){}try{const r=document.createElement("textarea");r.value=e,r.style.position="absolute",r.style.left="-9999px",r.style.top="0",r.style.opacity="0",r.style.pointerEvents="none",r.setAttribute("readonly",""),document.body.appendChild(r),r.select(),r.setSelectionRange(0,r.value.length);const s=document.execCommand("copy");return document.body.removeChild(r),!!s}catch(r){return!1}},cleanExpiredInvites:()=>{const r=new Date,s=e.filter(e=>new Date(e.expiresAt)>r);a(s)},getInvitesByType:r=>e.filter(e=>e.type===r),getRecentInvites:(r=10)=>e.sort((e,r)=>new Date(r.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,r),isInviteValid:r=>{const s=e.find(e=>e.code===r);if(!s)return!1;const t=new Date;return new Date(s.expiresAt)>t},getInviteByCode:r=>e.find(e=>e.code===r)||null,loadInvites:()=>{try{const e=localStorage.getItem("maestrosfc_simple_invites");if(e){const s=JSON.parse(e);r(s)}else r([])}catch(e){r([])}}}}function er({open:r,onOpenChange:s}){const{user:t}=j(),[a,o]=m.useState(null),[i,l]=m.useState(null),[n,c]=m.useState(null),{invites:d,loading:u,createInvite:g,copyToClipboard:f,cleanExpiredInvites:b,getRecentInvites:N,loadInvites:k}=Qe();m.useEffect(()=>{r&&k()},[r,k]);const C=async e=>{if(!t)return;const r=t.id||t.email||"unknown",s=await g(e,r);s?(l(e),c(s)):alert("Erro ao criar convite. Tente novamente.")},S=async e=>{await f(e.link)?(o(e.id),setTimeout(()=>o(null),3e3)):alert("‚ùå Erro ao copiar link. Verifique as permiss√µes do navegador.")},M=e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),z=e=>"mensalista"===e?"Mensalista":"Diarista",P=N(5);return e.jsx(F,{open:r,onOpenChange:s,children:e.jsxs(L,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(O,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5 text-blue-500"}),"Criar Convites para WhatsApp"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(h,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>C("mensalista"),children:e.jsxs(p,{className:"p-6 text-center",children:[e.jsx(v,{className:"w-12 h-12 mx-auto text-purple-500 mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-purple-600 mb-2",children:"Convite Mensalista"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Para jogadores que pagam mensalidade fixa"}),e.jsx(x,{className:"w-full bg-purple-600 hover:bg-purple-700",disabled:u,children:u?e.jsx(y,{className:"w-4 h-4 animate-spin"}):"Gerar Convite"})]})}),e.jsx(h,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>C("diarista"),children:e.jsxs(p,{className:"p-6 text-center",children:[e.jsx(w,{className:"w-12 h-12 mx-auto text-orange-500 mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-orange-600 mb-2",children:"Convite Diarista"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Para jogadores que pagam por partida"}),e.jsx(x,{className:"w-full bg-orange-600 hover:bg-orange-700",disabled:u,children:u?e.jsx(y,{className:"w-4 h-4 animate-spin"}):"Gerar Convite"})]})})]}),n&&e.jsx(h,{className:"border-2 border-green-200 bg-green-50 dark:bg-green-900/20",children:e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(T,{className:"w-5 h-5 text-green-500"}),e.jsxs("h3",{className:"text-lg font-semibold text-green-600",children:["Convite ",z(n.type)," Criado!"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Link do Convite:"}),e.jsx("div",{className:"text-sm font-mono text-gray-800 dark:text-gray-200 break-all",children:n.link})]}),e.jsx(x,{size:"sm",onClick:()=>S(n),className:"ml-3 flex items-center gap-1",variant:a===n.id?"default":"outline",children:a===n.id?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-xs",children:"Copiado!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Copiar"})]})})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Mensagem para WhatsApp:"}),e.jsx(x,{size:"sm",onClick:()=>(async e=>{await f(e.message)?(o(`message_${e.id}`),setTimeout(()=>o(null),3e3)):alert("‚ùå Erro ao copiar mensagem. Verifique as permiss√µes do navegador.")})(n),className:"flex items-center gap-1",variant:a===`message_${n.id}`?"default":"outline",children:a===`message_${n.id}`?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-xs",children:"Copiado!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Copiar"})]})})]}),e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-line",children:n.message})]}),e.jsx(x,{onClick:()=>(async e=>{const r=`${e.message}\n\nüîó Link: ${e.link}`;await f(r)?(o(`all_${e.id}`),setTimeout(()=>o(null),3e3)):alert("‚ùå Erro ao copiar conte√∫do. Verifique as permiss√µes do navegador.")})(n),className:"w-full bg-green-600 hover:bg-green-700",variant:(n.id,"default"),children:a===`all_${n.id}`?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Copiado! Cole no WhatsApp"]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Copiar Link + Mensagem"]})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"w-3 h-3"}),e.jsxs("span",{children:["Expira em ",M(n.expiresAt)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"w-3 h-3"}),e.jsxs("span",{children:["Criado em ",M(n.createdAt)]})]})]})]})]})}),P.length>0&&e.jsx(h,{children:e.jsxs(p,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-gray-500"}),"Convites Recentes (",P.length,")"]}),e.jsx("div",{className:"space-y-3",children:P.map(r=>{return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(s=r.type,"mensalista"===s?e.jsx(v,{className:"w-5 h-5 text-purple-500"}):e.jsx(w,{className:"w-5 h-5 text-orange-500"})),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:z(r.type)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Criado em ",M(r.createdAt)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Expira em ",M(r.expiresAt)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{size:"sm",variant:"outline",onClick:()=>S(r),className:"flex items-center gap-1",children:a===r.id?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-xs",children:"Copiado!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Copiar"})]})}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>window.open(r.link,"_blank"),className:"flex items-center gap-1",children:e.jsx(K,{className:"w-4 h-4"})})]})]},r.id);var s})})]})}),0===d.length&&e.jsx(h,{children:e.jsxs(p,{className:"p-8 text-center",children:[e.jsx(Y,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Nenhum convite criado"}),e.jsx("p",{className:"text-gray-500",children:"Crie seu primeiro convite clicando nos bot√µes acima!"})]})})]}),e.jsxs(U,{children:[e.jsx(x,{variant:"outline",onClick:()=>s(!1),children:"Fechar"}),e.jsx(x,{onClick:b,variant:"outline",className:"text-orange-600 hover:text-orange-700",children:"Limpar Expirados"}),e.jsx(x,{onClick:async()=>{const e="üß™ TESTE DE C√ìPIA - Maestros FC\n\nSe voc√™ est√° vendo esta mensagem, a fun√ß√£o de c√≥pia est√° funcionando!\n\n‚úÖ Timestamp: "+(new Date).toLocaleString("pt-BR");await f(e)?alert("‚úÖ Teste de c√≥pia bem-sucedido! Cole em qualquer lugar para verificar."):alert("‚ùå Teste de c√≥pia falhou! Verifique o console para mais detalhes.")},variant:"outline",className:"text-blue-600 hover:text-blue-700",children:"üß™ Testar C√≥pia"})]})]})})}function rr(e){return e.trim().replace(/[<>]/g,"")}function sr({className:r,...s}){return e.jsx("div",{className:`animate-pulse rounded-md bg-gray-300 dark:bg-gray-600 ${r}`,...s})}function tr({size:r="large"}){return e.jsx(sr,{className:`${{small:"w-12 h-12",medium:"w-20 h-20",large:"w-32 h-32"}[r]} rounded-full`})}function ar(){return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(r=>e.jsx(h,{children:e.jsx(p,{className:"p-4 text-center",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx(sr,{className:"w-8 h-8 mx-auto mb-2 rounded"}),e.jsx(sr,{className:"h-6 w-8 mx-auto mb-2 rounded"}),e.jsx(sr,{className:"h-4 w-16 mx-auto rounded"})]})})},r))})}function or(){return e.jsxs(h,{className:"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-yellow-200 dark:border-yellow-800",children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"w-6 h-6 rounded"}),e.jsx(sr,{className:"h-6 w-32 rounded"})]})}),e.jsx(p,{children:e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4",children:Array.from({length:8}).map((r,s)=>e.jsxs("div",{className:"text-center p-3 bg-gray-200 dark:bg-gray-700 rounded-lg",children:[e.jsx(sr,{className:"w-8 h-8 mx-auto mb-2 rounded"}),e.jsx(sr,{className:"h-3 w-16 mx-auto mb-1 rounded"}),e.jsx(sr,{className:"h-3 w-12 mx-auto rounded"})]},s))})})]})}function ir(){return e.jsx(h,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(tr,{size:"large"}),e.jsx(sr,{className:"h-8 w-24 rounded"})]}),e.jsxs("div",{className:"flex-1 text-center sm:text-left space-y-3",children:[e.jsxs("div",{children:[e.jsx(sr,{className:"h-8 w-48 mx-auto sm:mx-0 mb-2 rounded"}),e.jsx(sr,{className:"h-4 w-64 mx-auto sm:mx-0 rounded"})]}),e.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-xl p-4 mt-4 border border-zinc-200 dark:border-zinc-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(sr,{className:"w-4 h-4 rounded"}),e.jsx(sr,{className:"h-4 w-32 rounded"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sr,{className:"w-10 h-10 rounded-xl"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(sr,{className:"h-3 w-16 mb-1 rounded"}),e.jsx(sr,{className:"h-4 w-20 rounded"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sr,{className:"w-10 h-10 rounded-xl"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(sr,{className:"h-3 w-16 mb-1 rounded"}),e.jsx(sr,{className:"h-4 w-20 rounded"})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(sr,{className:"h-8 w-20 rounded"})})]})]})})})}function lr(){return e.jsxs("div",{className:"mx-auto w-full max-w-4xl p-4 sm:p-6 space-y-4 pb-20",children:[e.jsx("div",{className:"bg-white dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700 shadow-sm rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{children:[e.jsx(sr,{className:"h-6 w-24 mb-2 rounded"}),e.jsx(sr,{className:"h-4 w-48 rounded"})]}),e.jsx(sr,{className:"w-8 h-8 rounded"})]})}),e.jsx(ir,{}),e.jsx(ar,{}),e.jsx(or,{}),e.jsxs(h,{children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"w-5 h-5 rounded"}),e.jsx(sr,{className:"h-6 w-32 rounded"})]})}),e.jsx(p,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(sr,{className:"w-12 h-12 mx-auto mb-4 rounded"}),e.jsx(sr,{className:"h-4 w-48 mx-auto rounded"})]})})]}),e.jsxs(h,{children:[e.jsx(N,{children:e.jsx(sr,{className:"h-6 w-24 rounded"})}),e.jsx(p,{children:e.jsx(sr,{className:"h-10 w-full rounded"})})]}),e.jsx(sr,{className:"h-10 w-full rounded"})]})}function nr({fileName:r,progress:s=0}){return e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:["Processando: ",r]}),e.jsx("div",{className:"mt-1 w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:[Math.round(s),"% conclu√≠do"]})]})]})})}function cr(){const{user:r,loading:s,signOut:t,signInWithGoogle:a,updateAvatar:o}=j(),i=Z();M(),z();const[l,n]=m.useState(!1),[c,d]=m.useState(!1),[u,f]=m.useState(!1),[b,v]=m.useState(""),[y,w]=m.useState(!1);m.useState(!1),m.useState(null),m.useState(!1);const S=m.useRef(null),[P,A]=m.useState("Meia"),[D,q]=m.useState("G"),[R,E]=m.useState(!1),[G,T]=m.useState([]),[I,U]=m.useState([]),[B,H]=m.useState(!1),[K,Y]=m.useState(!1),[J,W]=m.useState(()=>{const e=localStorage.getItem("playerRewards");return e?JSON.parse(e):{xp:0,coins:0,badges:[],titles:[],unlocked:[]}});m.useState(!1),m.useState([]),m.useState(new Set);const[X,ie]=m.useState(0),[le,ne]=m.useState(""),[ce,ue]=m.useState(!1),{stats:pe,loading:ge,error:ve}=xe(r?.id||"");!function(e,r){const[s,t]=m.useState([]),[a,o]=m.useState([]),[i,l]=m.useState(null),{events:n,allEvents:c,round:d}=$();M();const{stats:u}=xe(e),x=m.useCallback(()=>{if(!u)return;const e={totalGoals:u.totalGoals||0,totalAssists:u.totalAssists||0,totalMatches:u.totalMatches||0,totalPayments:u.totalPayments||0,consecutiveMatches:u.consecutiveMatches||0,victories:u.victories||0,fastestGoal:45,goalAccuracy:85,cleanSheets:3,hatTricks:1,perfectAssists:2,mvpCount:5,monthlyGoals:8,monthlyMatches:6,loginDays:15},s=fe(e,r),a=i?fe(i,r):[],n=s.filter(e=>{const r=a.find(r=>r.id===e.id);return e.unlocked&&(!r||!r.unlocked)});if(n.length>0){o(n);const e=n.map(e=>({id:`notification-${Date.now()}-${e.id}`,figurinha:e,timestamp:Date.now(),isNew:!0}));t(r=>[...e,...r])}l(e)},[u,r,i]);m.useEffect(()=>{u&&x()},[u]),m.useEffect(()=>{(n.length>0||c.length>0)&&x()},[n,c]);const h=m.useCallback(e=>{t(r=>r.map(r=>r.id===e?{...r,isNew:!1}:r))},[]),p=m.useCallback(()=>{t([])},[])}(r?.id||"",r?.role);const ye=m.useMemo(()=>({victories:pe.victories||0,totalGoals:pe.totalGoals||0,totalAssists:pe.totalAssists||0,totalMatches:pe.totalMatches||0,totalPayments:pe.totalPayments||0,consecutiveMatches:pe.consecutiveMatches||0}),[pe]),we=m.useMemo(()=>({totalGoals:ye.totalGoals,totalAssists:ye.totalAssists,totalMatches:ye.totalMatches,totalPayments:ye.totalPayments,consecutiveMatches:ye.consecutiveMatches,victories:ye.victories,fastestGoal:45,goalAccuracy:85,cleanSheets:3,hatTricks:1,perfectAssists:2,mvpCount:5,monthlyGoals:8,monthlyMatches:6,loginDays:15}),[ye]);m.useEffect(()=>{},[pe,ge]);const Ne=m.useRef(J);m.useEffect(()=>{JSON.stringify(Ne.current)!==JSON.stringify(J)&&(localStorage.setItem("playerRewards",JSON.stringify(J)),Ne.current=J)},[J]),m.useMemo(()=>function(e){const r=Math.floor(e/100)+1,s=100*(r-1),t=100*r,a=(e-s)/(t-s)*100;return{level:r,xpToNext:t-e,progress:Math.min(100,Math.max(0,a))}}(J.xp),[J.xp]);const ke=m.useRef(null);m.useEffect(()=>{if(pe&&!ge){const e=function(e){const r=[],s=[];if(!e||"object"!=typeof e)return{isValid:!1,errors:["Dados de estat√≠sticas devem ser um objeto v√°lido"],warnings:[]};const t=["victories","totalGoals","totalAssists","totalMatches","totalPayments","consecutiveMatches"];for(const i of t)void 0!==e[i]&&null!==e[i]&&("number"!=typeof e[i]?r.push(`${i} deve ser um n√∫mero`):Number.isInteger(e[i])?e[i]<0&&r.push(`${i} n√£o pode ser negativo`):s.push(`${i} deve ser um n√∫mero inteiro`));const a=0===r.length;let o;if(a){o={};for(const r of t)void 0!==e[r]&&null!==e[r]&&(o[r]=Math.max(0,Math.floor(e[r])))}return{isValid:a,errors:r,warnings:s,sanitizedData:o}}(pe);e.isValid||(U(e.warnings),H(!0),ke.current&&clearTimeout(ke.current),ke.current=setTimeout(()=>{H(!1),U([])},3e3))}return()=>{ke.current&&clearTimeout(ke.current)}},[pe,ge]),m.useEffect(()=>{},[r]);const{subscribePlayerUpdates:Ce,unsubscribePlayerUpdates:Se,isRealtime:Me}=he();m.useEffect(()=>(r?.id&&Ce(r.id),()=>{r?.id&&Se(r.id)}),[r?.id]);const ze=m.useMemo(()=>[{id:"first-goal",name:"Primeiro Gol",emoji:"‚öΩ",description:"1¬∫ gol da vida",requirement:1,current:ye.totalGoals,unlocked:ye.totalGoals>=1,color:"from-green-400 to-emerald-500",borderColor:"border-green-300 dark:border-green-600"},{id:"first-assist",name:"Primeira Assist",emoji:"üéØ",description:"1¬™ assist√™ncia",requirement:1,current:ye.totalAssists,unlocked:ye.totalAssists>=1,color:"from-blue-400 to-cyan-500",borderColor:"border-blue-300 dark:border-blue-600"},{id:"debutante",name:"Debutante",emoji:"‚≠ê",description:"1¬™ partida",requirement:1,current:ye.totalMatches,unlocked:ye.totalMatches>=1,color:"from-purple-400 to-indigo-500",borderColor:"border-purple-300 dark:border-purple-600"},{id:"first-payment",name:"Primeiro Pago",emoji:"üí∞",description:"1¬∫ pagamento",requirement:1,current:ye.totalPayments,unlocked:ye.totalPayments>=1,color:"from-yellow-400 to-amber-500",borderColor:"border-yellow-300 dark:border-yellow-600"},{id:"consecutive",name:"N√£o Falto Uma",emoji:"üîó",description:"5 partidas seguidas",requirement:5,current:ye.consecutiveMatches,unlocked:ye.consecutiveMatches>=5,color:"from-red-400 to-pink-500",borderColor:"border-red-300 dark:border-red-600"},{id:"presente",name:"Presente",emoji:"üî•",description:"5 partidas total",requirement:5,current:ye.totalMatches,unlocked:ye.totalMatches>=5,color:"from-emerald-400 to-teal-500",borderColor:"border-emerald-300 dark:border-emerald-600"},{id:"artilheiro",name:"Artilheiro",emoji:"ü•ä",description:"15+ gols total",requirement:15,current:ye.totalGoals,unlocked:ye.totalGoals>=15,color:"from-orange-400 to-red-500",borderColor:"border-orange-300 dark:border-orange-600"},{id:"criador",name:"Criador",emoji:"‚ö°",description:"10+ assist√™ncias",requirement:10,current:ye.totalAssists,unlocked:ye.totalAssists>=10,color:"from-violet-400 to-purple-500",borderColor:"border-violet-300 dark:border-violet-600"}],[ye]),Pe=m.useCallback(async e=>{const r=e.target.files?.[0];if(!r)return;const s=function(e){const r=[],s=[];if(!(e&&e instanceof File))return{isValid:!1,errors:["Arquivo inv√°lido"],warnings:[]};e.type.startsWith("image/")||r.push("Arquivo deve ser uma imagem"),e.size>10485760&&r.push("Arquivo deve ter no m√°ximo 10MB"),e.size<1024&&s.push("Arquivo muito pequeno, pode ser de baixa qualidade");const t="."+e.name.split(".").pop()?.toLowerCase();return[".jpg",".jpeg",".png",".gif",".webp"].includes(t)||s.push("Extens√µes recomendadas: JPG, PNG, GIF, WebP"),{isValid:0===r.length,errors:r,warnings:s}}(r);if(!s.isValid)return T(s.errors),U(s.warnings),H(!0),void setTimeout(()=>{H(!1),T([]),U([])},5e3);s.warnings.length>0&&(U(s.warnings),H(!0),setTimeout(()=>{H(!1),U([])},3e3)),ne(r.name),ue(!0),ie(0);const t=setInterval(()=>{ie(e=>e>=90?(clearInterval(t),90):e+10)},100),a=new FileReader;a.onload=e=>{const r=e.target?.result;ie(100),setTimeout(()=>{v(r),f(!0),n(!1),ue(!1),ie(0),ne("")},500)},a.onerror=()=>{alert("Erro ao ler arquivo. Tente novamente."),ue(!1),ie(0),ne(""),clearInterval(t)},a.readAsDataURL(r),S.current&&(S.current.value="")},[]),_e=m.useCallback(async e=>{d(!0),f(!1);try{await o(e)}catch(r){alert("Erro ao atualizar avatar")}finally{d(!1),v(""),n(!1)}},[o]),Ae=m.useCallback(async()=>{try{await t(),i("/login")}catch(e){localStorage.removeItem("offline_user"),localStorage.clear(),sessionStorage.clear(),window.location.href="/login"}},[t,i]);return s?e.jsx(lr,{}):r?e.jsxs("div",{className:"mx-auto w-full max-w-4xl p-4 sm:p-6 space-y-4 pb-20",children:[e.jsx("header",{className:"bg-white dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700 shadow-sm rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-zinc-100",children:"Perfil"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Informa√ß√µes do seu perfil e configura√ß√µes"})]}),"owner"===r.role&&e.jsx("button",{onClick:()=>i("/owner-dashboard"),className:"p-2 hover:bg-purple-100 hover:text-purple-700 transition-colors rounded-lg",title:"Acesso r√°pido ao Dashboard do Owner",children:e.jsx(Q,{className:"w-4 h-4 text-purple-600"})})]})}),s?e.jsx(ir,{}):e.jsx(h,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"relative",children:r?.custom_avatar||r?.avatar_url||r?.avatar?e.jsx("img",{src:r.custom_avatar||r.avatar_url||r.avatar,alt:"Avatar",className:"w-28 h-28 sm:w-32 sm:h-32 rounded-full object-cover shadow-lg"}):e.jsx("div",{className:"w-28 h-28 sm:w-32 sm:h-32 bg-zinc-200 dark:bg-zinc-700 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(k,{className:"w-12 h-12 sm:w-14 sm:h-14 text-zinc-500"})})}),e.jsxs("button",{onClick:()=>n(!0),className:"w-fit px-4 py-2 text-sm bg-blue-600 text-white rounded-lg flex items-center justify-center hover:bg-blue-700 transition-colors shadow-md",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Alterar Foto"]})]}),e.jsxs("div",{className:"flex-1 text-center sm:text-left space-y-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold dark:text-zinc-100",children:r.name||"Usu√°rio"}),e.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1",children:r.email||"E-mail n√£o dispon√≠vel"})]}),e.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-xl p-4 mt-4 border border-zinc-200 dark:border-zinc-700",children:[e.jsxs("h3",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100 mb-4 flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Informa√ß√µes do Jogador"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center",children:e.jsx(de,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mb-1",children:"Posi√ß√£o"}),R?e.jsxs("select",{value:P,onChange:e=>A(e.target.value),className:"text-sm font-medium text-zinc-900 dark:text-zinc-100 bg-white dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-600 rounded-lg px-3 py-2 w-full",children:[e.jsx("option",{value:"Goleiro",children:"Goleiro"}),e.jsx("option",{value:"Zagueiro",children:"Zagueiro"}),e.jsx("option",{value:"Meia",children:"Meia"}),e.jsx("option",{value:"Atacante",children:"Atacante"})]}):e.jsx("p",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:P})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mb-1",children:"Tamanho"}),R?e.jsxs("select",{value:D,onChange:e=>q(e.target.value),className:"text-sm font-medium text-zinc-900 dark:text-zinc-100 bg-white dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-600 rounded-lg px-3 py-2 w-full",children:[e.jsx("option",{value:"G",children:"G"}),e.jsx("option",{value:"GG",children:"GG"})]}):e.jsx("p",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:D})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs("button",{onClick:()=>{if(R){const e=function(e){const r=[];e.position&&"string"!=typeof e.position?r.push("Posi√ß√£o deve ser uma string"):e.position&&(["Goleiro","Zagueiro","Meia","Atacante"].includes(e.position)||r.push("Posi√ß√£o deve ser uma das op√ß√µes v√°lidas: Goleiro, Zagueiro, Meia, Atacante"));e.shirtSize&&"string"!=typeof e.shirtSize?r.push("Tamanho da camisa deve ser uma string"):e.shirtSize&&(["P","M","G","GG","XG"].includes(e.shirtSize)||r.push("Tamanho da camisa deve ser um dos valores v√°lidos: P, M, G, GG, XG"));const s=0===r.length;let t;return s&&(t={position:e.position?rr(e.position):void 0,shirtSize:e.shirtSize?rr(e.shirtSize):void 0}),{isValid:s,errors:r,warnings:[],sanitizedData:t}}({position:P,shirtSize:D});if(!e.isValid)return T(e.errors),U(e.warnings),H(!0),void setTimeout(()=>{H(!1),T([]),U([])},5e3)}E(!R)},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 "+(R?"bg-green-600 hover:bg-green-700 text-white shadow-md":"bg-zinc-100 hover:bg-zinc-200 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-700 dark:text-zinc-300"),children:[R?"Salvar":"Editar",e.jsx(ee,{className:"w-4 h-4"})]})}),r.role&&e.jsxs(_,{variant:"secondary",className:"owner"===r.role?"mt-3 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 border-purple-200 dark:border-purple-800":"admin"===r.role?"mt-3 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border-blue-200 dark:border-blue-800":"mt-3 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border-green-200 dark:border-green-800",children:[e.jsx(re,{className:"w-3 h-3 mr-1"}),"owner"===r.role?"üëë Dono":"admin"===r.role?"üõ°Ô∏è Admin":"aux"===r.role?"‚ö° Auxiliar":"mensalista"===r.role?"‚≠ê Mensalista":"diarista"===r.role?"üîπ Diarista":"üë§ Usu√°rio"]}),"owner"===r.role&&e.jsxs(x,{onClick:()=>i("/owner-dashboard"),variant:"ghost",className:"mt-4 bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-800 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Acessar Dashboard Completo"]})]})]})})}),ge?e.jsx(ar,{}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(h,{children:e.jsxs(p,{className:"p-4 text-center",children:[e.jsx(g,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:ye.victories}),e.jsx("div",{className:"text-sm text-zinc-500",children:"Vit√≥rias"})]})}),e.jsx(h,{children:e.jsxs(p,{className:"p-4 text-center",children:[e.jsx(de,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:ye.totalGoals}),e.jsx("div",{className:"text-sm text-zinc-500",children:"Gols"})]})}),e.jsx(h,{children:e.jsxs(p,{className:"p-4 text-center",children:[e.jsx(me,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:ye.totalAssists}),e.jsx("div",{className:"text-sm text-zinc-500",children:"Assist√™ncias"})]})})]}),!1,Me&&!ge&&e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Dados em tempo real ativo"]})}),ce&&e.jsx(nr,{fileName:le,progress:X}),B&&e.jsxs("div",{className:"space-y-2",children:[G.length>0&&e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"!"})}),e.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-300",children:"Erros de Valida√ß√£o"})]}),e.jsx("ul",{className:"text-sm text-red-700 dark:text-red-400 space-y-1",children:G.map((r,s)=>e.jsxs("li",{children:["‚Ä¢ ",r]},s))})]}),I.length>0&&e.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"‚ö†"})}),e.jsx("h4",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-300",children:"Avisos"})]}),e.jsx("ul",{className:"text-sm text-yellow-700 dark:text-yellow-400 space-y-1",children:I.map((r,s)=>e.jsxs("li",{children:["‚Ä¢ ",r]},s))})]})]}),ge?e.jsx(or,{}):e.jsxs(h,{className:"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-yellow-200 dark:border-yellow-800",children:[e.jsx(N,{children:e.jsxs(C,{className:"flex items-center gap-2 text-yellow-800 dark:text-yellow-300",children:[e.jsx(g,{className:"w-6 h-6"}),"Minhas Conquistas"]})}),e.jsxs(p,{children:[e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4",children:["owner"===r?.role&&e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg border-4 border-yellow-300 dark:border-yellow-600 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsx("div",{className:"text-4xl mb-1 drop-shadow-lg",children:"üëë"}),e.jsx("div",{className:"text-xs font-bold text-white drop-shadow-md leading-tight",children:"O GRANDE L√çDER"}),e.jsx("div",{className:"text-xs text-yellow-100 drop-shadow-md mt-1",children:"Soberano Supremo"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-300 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:"üíé"})})]}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-black text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none whitespace-nowrap z-10",children:[e.jsx("div",{className:"text-yellow-300 font-bold",children:"FIGURINHA LEND√ÅRIA"}),e.jsx("div",{children:"Owner do Projeto"}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-black"})]})]}),"owner"!==r?.role&&e.jsxs("div",{className:"text-center p-3 bg-gray-100 dark:bg-gray-800 rounded-lg border-2 border-gray-300 dark:border-gray-600",children:[e.jsx("div",{className:"text-2xl text-gray-400 mb-1",children:"üîí"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Bloqueada"})]}),ze.map(r=>e.jsxs("div",{className:"relative text-center p-3 rounded-lg border-2 shadow-md transition-all duration-300 "+(r.unlocked?`bg-gradient-to-br ${r.color} ${r.borderColor} hover:scale-105`:"bg-gray-200 dark:bg-gray-700 border-gray-300 dark:border-gray-600"),children:[e.jsx("div",{className:"text-3xl mb-1 opacity-100",children:r.emoji}),e.jsx("div",{className:"text-xs font-bold drop-shadow-md "+(r.unlocked?"text-white":"text-gray-500"),children:r.name}),e.jsx("div",{className:"text-xs "+(r.unlocked?"text-gray-100":"text-gray-500"),children:r.description}),!r.unlocked&&r.current>0&&e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"w-full bg-gray-300 dark:bg-gray-600 rounded-full h-1",children:e.jsx("div",{className:"bg-blue-500 h-1 rounded-full transition-all duration-500",style:{width:`${Math.min(100,r.current/r.requirement*100)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[r.current,"/",r.requirement]})]}),r.unlocked&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:"‚úì"})})]},r.id))]}),e.jsxs("div",{className:"mt-4 p-4 bg-zinc-50 dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:"Progresso das Conquistas"}),e.jsxs("div",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:[ze.filter(e=>e.unlocked).length,"/",ze.length]})]}),e.jsx("div",{className:"w-full bg-zinc-200 dark:bg-zinc-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full transition-all duration-1000",style:{width:ze.filter(e=>e.unlocked).length/ze.length*100+"%"}})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs text-zinc-600 dark:text-zinc-400",children:[e.jsxs("div",{children:["‚úÖ Desbloqueadas: ",ze.filter(e=>e.unlocked).length]}),e.jsxs("div",{children:["üîí Em progresso: ",ze.filter(e=>!e.unlocked&&e.current>0).length]})]})]}),"owner"===r?.role&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 text-center",children:[e.jsx("span",{className:"font-bold",children:"üéâ Parab√©ns! Voc√™ possui a figurinha lend√°ria de Owner!"}),e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"Esta conquista excepcional destaca sua posi√ß√£o como fundador e l√≠der do projeto."})]})}),!1,e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs(x,{onClick:()=>Y(!0),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold px-6 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(g,{className:"w-5 h-5 mr-2"}),"Cat√°logo de Figurinhas"]})})]})]}),e.jsxs(h,{children:[e.jsx(N,{children:e.jsx(C,{className:"flex items-center justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Partidas Recentes"]})})}),e.jsx(p,{children:e.jsxs("div",{className:"text-center py-8 text-zinc-500",children:[e.jsx(de,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Nenhuma partida registrada ainda"})]})})]}),e.jsxs(h,{children:[e.jsx(N,{children:e.jsx(C,{children:"Configura√ß√µes"})}),e.jsx(p,{className:"space-y-4",children:e.jsx(je,{})})]}),("admin"===r.role||"aux"===r.role)&&e.jsxs(h,{className:"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/10",children:[e.jsx(N,{children:e.jsxs(C,{className:"flex items-center gap-2 text-green-800 dark:text-green-300",children:[e.jsx(se,{className:"w-5 h-5"}),"Ferramentas de Administra√ß√£o"]})}),e.jsx(p,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-4 border border-green-200 dark:border-green-700",children:[e.jsxs(x,{onClick:()=>{w(!0)},className:"w-full justify-start bg-green-600 hover:bg-green-700 text-white transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-[1.02]",variant:"default",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Criar Convites WhatsApp"]}),e.jsxs("div",{className:"mt-3 text-xs text-green-600 dark:text-green-400 space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-1",children:["üì± ",e.jsx("strong",{children:"Mensalistas:"})," Link de convite v√°lido por 1 dia"]}),e.jsxs("p",{className:"flex items-center gap-1",children:["üì± ",e.jsx("strong",{children:"Diaristas:"})," Link de convite v√°lido por 1 dia"]}),e.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mt-2",children:"Mensagem personalizada + URLs √∫nicos para compartilhar"})]})]})})})]}),e.jsx("div",{children:e.jsxs(x,{variant:"destructive",onClick:Ae,className:"w-full flex items-center justify-center",title:"Sair da conta",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Sair da Conta"]})}),e.jsx(F,{open:l,onOpenChange:n,children:e.jsxs(L,{children:[e.jsx(O,{children:e.jsx(V,{children:"Alterar Foto de Perfil"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-zinc-500",children:"Selecione uma imagem para ser sua foto de perfil."}),e.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:Pe,className:"w-full",hidden:!0}),e.jsxs(x,{onClick:()=>S.current?.click(),className:"w-full",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Selecionar Imagem"]})]})]})}),u&&e.jsx(F,{open:u,onOpenChange:f,children:e.jsxs(L,{className:"max-w-md",children:[e.jsx(O,{children:e.jsx(V,{children:"Recortar Imagem"})}),e.jsx(Ze,{imageSrc:b,onCropComplete:_e,onCancel:()=>f(!1)})]})}),("admin"===r.role||"aux"===r.role)&&e.jsx(er,{open:y,onOpenChange:w}),e.jsx(F,{open:K,onOpenChange:Y,children:e.jsxs(L,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsx(O,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-6 h-6"}),"Cat√°logo de Figurinhas"]})}),e.jsx(be,{playerStats:we,userRole:r?.role,onClose:()=>Y(!1)})]})})]}):e.jsx("div",{className:"mx-auto w-full max-w-4xl p-4 sm:p-6 space-y-4 pb-20",children:e.jsx(h,{children:e.jsxs(p,{className:"p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Acesso Restrito"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Voc√™ precisa estar logado para acessar seu perfil."}),e.jsx(x,{onClick:()=>i("/simple-auth"),children:"Fazer Login"})]})})})}Xe.displayName=Ke.displayName;export{cr as default};
