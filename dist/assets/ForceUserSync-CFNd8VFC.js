import{j as e}from"./vendor-ui-Cg0qxSES.js";import{g as s,h as a,C as r,d as l,e as n,U as o,o as i,f as c,j as d,L as t,B as m,R as x}from"./index-XxW9FBxQ.js";import{r as j}from"./vendor-react-CyD6OLG_.js";import{D as u}from"./database-Ce_Wfjf8.js";import"./vendor-router-VFXGavtY.js";import"./vendor-pdf-oqmhCI76.js";import"./vendor-utils-CrFdsnXa.js";function h(){const{user:h}=s(),{syncProfileToPlayer:g,players:p}=a(),[b,N]=j.useState("idle"),[f,w]=j.useState("");return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-6 h-6"}),"Forçar Sincronização do Usuário"]}),e.jsx(i,{children:"Sincronizar manualmente o usuário logado com a tabela de jogadores"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(o,{className:"w-5 h-5 text-blue-600"}),e.jsx("div",{className:"flex-1",children:h?e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900",children:[e.jsx("strong",{children:"Usuário logado:"})," ",h.name]}),e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Email:"})," ",h.email]}),e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Role:"})," ",h.role||"player"]})]}):e.jsx("p",{className:"text-sm text-blue-900",children:"Nenhum usuário logado"})})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(u,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Status na tabela de jogadores:"}),e.jsx("p",{className:"text-sm text-green-700",children:h&&h.email&&p?.some(e=>e.email===h.email||e.name===h.name&&!h.email)?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(d,{className:"w-4 h-4"}),"✅ Usuário já existe na tabela"]}):e.jsx("span",{children:"❌ Usuário não encontrado na tabela"})})]})]}),f&&e.jsx("div",{className:"p-4 rounded-lg border "+("success"===b?"bg-green-50 border-green-200":"error"===b?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"),children:e.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:f})}),"syncing"===b&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(t,{className:"w-5 h-5 text-yellow-600 animate-spin"}),e.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Sincronizando usuário..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(m,{onClick:async()=>{if(!h||!h.email||!h.name)return N("error"),void w("❌ Usuário não está logado ou dados incompletos");N("syncing"),w("🔄 Forçando sincronização...");try{const e=h.role;await g(h.email,h.name,e),N("success"),w(`✅ Sincronização realizada com sucesso!\n\nUsuário: ${h.name}\nEmail: ${h.email}\nRole: ${e||"player"}`),setTimeout(()=>{window.location.reload()},2e3)}catch(e){N("error"),w(`❌ Erro na sincronização: ${e.message}`)}},disabled:"syncing"===b||!h,className:"flex-1",children:"syncing"===b?e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"w-4 h-4 mr-2 animate-spin"}),"Sincronizando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Forçar Sincronização"]})}),e.jsxs(m,{onClick:()=>window.location.href="/manage-players",variant:"outline",className:"flex-1",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Ver Jogadores"]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700",children:[e.jsx("p",{className:"font-semibold mb-2",children:"📋 Instruções:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[e.jsx("li",{children:"Certifique-se de estar logado com sua conta Google"}),e.jsx("li",{children:'Clique em "Forçar Sincronização" para criar seu perfil'}),e.jsx("li",{children:'Após a sincronização, você aparecerá em "Gerenciar Jogadores"'}),e.jsx("li",{children:"Como owner, você terá acesso total ao sistema"})]})]}),"success"===b&&e.jsxs(m,{onClick:()=>window.location.href="/manage-players",className:"w-full",children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),"Ir para Gerenciar Jogadores"]})]})]})})})}export{h as default};
