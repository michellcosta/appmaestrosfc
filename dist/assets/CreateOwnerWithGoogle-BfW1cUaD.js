import{j as e}from"./vendor-ui-Bl6_fDik.js";import{r as s}from"./vendor-react-BSMgdr9Q.js";import{u as a,m as r,P as l,C as o,d as i,g as n,e as c,n as t,a as d,B as m,i as x,o as h}from"./index-D-h0AB1a.js";import{L as j}from"./vendor-router-uw2sfKrb.js";import{C as u}from"./crown-DQow1lgx.js";import{S as g}from"./shield-Dzd3wczT.js";import{A as p}from"./arrow-left-DryN1BiL.js";import{S as f}from"./settings-B6vsxk6X.js";import"./vendor-supabase-5K_8OYiR.js";import"./vendor-utils-CrFdsnXa.js";function b(){const{signInWithGoogle:b,user:N,loading:v}=a(),[w,C]=s.useState(!1),[y,A]=s.useState(null),[G,O]=s.useState(!1);s.useEffect(()=>{const e=r();e&&N?.id!==e&&(O(!0),A(l.CANNOT_CREATE_OWNER))},[N]);return N&&"owner"===N.role?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs(o,{className:"w-full max-w-md",children:[e.jsxs(i,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(n,{className:"w-8 h-8 text-green-600"})}),e.jsx(c,{className:"text-2xl font-bold text-green-700",children:"Owner Criado com Sucesso!"}),e.jsx(t,{children:"Sua conta owner foi criada e voc√™ j√° est√° logado"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(u,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-semibold",children:"Informa√ß√µes da Conta"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",N.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nome:"})," ",N.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",e.jsx("span",{className:"text-purple-600 font-semibold",children:"Owner"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"‚úÖ Agora voc√™ pode:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Acessar a carteira digital com saldo real"}),e.jsx("li",{children:"‚Ä¢ Fazer transa√ß√µes PIX"}),e.jsx("li",{children:"‚Ä¢ Gerenciar todos os usu√°rios"}),e.jsx("li",{children:"‚Ä¢ Acessar todas as funcionalidades do sistema"}),e.jsx("li",{children:"‚Ä¢ Configurar permiss√µes e acessos"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{asChild:!0,className:"flex-1",children:e.jsx(j,{to:"/dashboard",children:"Ir para Dashboard"})}),e.jsx(m,{asChild:!0,variant:"outline",className:"flex-1",children:e.jsx(j,{to:"/finance",children:"Ver Carteira Digital"})})]})]})]})}):G?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:e.jsxs(o,{className:"w-full max-w-md",children:[e.jsxs(i,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(g,{className:"w-8 h-8 text-red-600"})}),e.jsx(c,{className:"text-2xl font-bold text-red-700",children:"Acesso Restrito"}),e.jsx(t,{children:"A cria√ß√£o de novos owners est√° protegida"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(g,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-semibold text-red-800",children:"Sistema de Prote√ß√£o Ativo"})]}),e.jsx("p",{className:"text-sm text-red-700",children:y})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-orange-800 mb-2",children:"üîí Prote√ß√µes Ativas:"}),e.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Apenas o owner principal pode criar novos owners"}),e.jsx("li",{children:"‚Ä¢ O owner principal n√£o pode ser exclu√≠do"}),e.jsx("li",{children:"‚Ä¢ Sistema protegido contra cria√ß√£o n√£o autorizada"}),e.jsx("li",{children:"‚Ä¢ Controle total de acesso implementado"})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(m,{asChild:!0,variant:"outline",size:"sm",children:e.jsxs(j,{to:"/",className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Voltar ao in√≠cio"]})})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs(o,{className:"w-full max-w-md",children:[e.jsxs(i,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(u,{className:"w-8 h-8 text-purple-600"})}),e.jsx(c,{className:"text-2xl font-bold",children:"Criar Conta Owner com Google"}),e.jsx(t,{children:"Fa√ßa login com sua conta Google para criar automaticamente uma conta owner"})]}),e.jsxs(d,{className:"space-y-6",children:[y&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Erro ao criar conta"}),e.jsx("p",{className:"text-red-600 text-sm",children:y})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"üöÄ Como funciona:"}),e.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:'1. Clique no bot√£o "Criar Owner com Google"'}),e.jsx("li",{children:"2. Fa√ßa login com sua conta Google"}),e.jsx("li",{children:"3. O sistema criar√° automaticamente uma conta owner"}),e.jsx("li",{children:"4. Voc√™ ter√° acesso completo ao sistema"})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[e.jsxs("h4",{className:"font-semibold text-yellow-800 mb-2 flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"Status da Configura√ß√£o"]}),e.jsxs("div",{className:"text-xs text-yellow-700 space-y-1",children:[e.jsx("p",{children:e.jsx("strong",{children:"‚ùì Se o bot√£o n√£o estiver funcionando:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Verifique se o Supabase est√° configurado com Google OAuth"}),e.jsx("li",{children:"Confirme se o Vercel tem as vari√°veis corretas carregadas"}),e.jsx("li",{children:"Certifique-se que o redirect URL est√° no Google Console"}),e.jsx("li",{children:"Abra o Console do navegador para ver logs de erro"})]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"‚úÖ Vantagens da conta Owner:"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Carteira digital com saldo real"}),e.jsx("li",{children:"‚Ä¢ Transa√ß√µes PIX funcionais"}),e.jsx("li",{children:"‚Ä¢ Acesso a todas as funcionalidades"}),e.jsx("li",{children:"‚Ä¢ Gerenciamento completo do sistema"}),e.jsx("li",{children:"‚Ä¢ Dados salvos no banco de dados"})]})]}),e.jsx(m,{onClick:async()=>{if(h(N?.id))try{C(!0),A(null),await b()}catch(e){let s="Erro desconhecido ao fazer login com Google";s=e.message?.includes("popup_closed")?"Janela do Google foi fechada. Tente novamente.":e.message?.includes("access_denied")?"Acesso negado pelo Google. Verifique as configura√ß√µes.":e.message?.includes("goog_oauth")?"Erro de configura√ß√£o OAuth. Verifique configura√ß√µes Supabase.":e.message||"Erro ao conectar com Google",A(s)}finally{C(!1)}else A(l.CANNOT_CREATE_OWNER)},disabled:w||v,className:"w-full",size:"lg",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Criando conta..."]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Criar Owner com Google"]})}),e.jsx("div",{className:"text-center",children:e.jsx(m,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(j,{to:"/",className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Voltar ao in√≠cio"]})})})]})]})})}export{b as default};
